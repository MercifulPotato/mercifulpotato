Item(by='pshirshov', descendants=None, kids=None, score=None, time=1602855773, title=None, item_type='comment', url=None, parent=24800161, text='&gt; The reason is that only after the new(result, finalizer) call the compiler knows that it needs to generate a custom destructor for the CustomObject type, but when it compiled tricky the default destructor was used.<p>I&#x27;m wondering why people underestimate graphs that much. It&#x27;s lot easier to explicitly represent dependencies between your definitions as a graph and not just avoid such issues but also get rid of unnecessary passes. I did that in my compiler and it works great.')