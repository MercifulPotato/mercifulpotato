Item(by='mikepurvis', descendants=None, kids=[25549144], score=None, time=1609041229, title=None, item_type='comment', url=None, parent=25547830, text='Yeah, any Docker file that starts with `apt update; apt dist-upgrade` is an instant fail.<p>You might be interested in this fascinating exploration of attempting to bend Docker into better caching and composition by injecting blocks of Nix packages as individual layers:<p><a href="https:&#x2F;&#x2F;grahamc.com&#x2F;blog&#x2F;nix-and-layered-docker-images" rel="nofollow">https:&#x2F;&#x2F;grahamc.com&#x2F;blog&#x2F;nix-and-layered-docker-images</a>')