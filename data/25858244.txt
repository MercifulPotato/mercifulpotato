Item(by='chris_wot', descendants=None, kids=[25860920, 25865525], score=None, time=1611232841, title=None, item_type='comment', url=None, parent=25848625, text='As they linked to the LibreOffice bug that we hit,[1] it might be worthwhile explaining how the cross platform architecture works in LibreOffice.<p>The widgeting&#x2F;graphics library is actually run by something called VCL (the Visual Component Library). It&#x27;s a bit of a mess to be honest, but the simplified version is that there is a class called OutputDevice that the rest of the app uses, which basically acts as a fascade over a platform specific class called SalGraphics (there are a number of other platform specific classes, SalGraphics is what I focus on here).<p>Basically it is a class that implements a bunch of primitive drawing functions which call on abstract functions. We then implement these functions in a platform specific class.<p>To see the guts of the Mac class, see AquaSalGraphics [2] - and no, none of know why it was named &quot;Aqua&quot;... our codebase is <i>old</i>.<p>FWIW, OutputDevice has serious issues. I have detailed them in a mailing list post. [3]<p>1. <a href="https:&#x2F;&#x2F;bugs.documentfoundation.org&#x2F;show_bug.cgi?id=138122" rel="nofollow">https:&#x2F;&#x2F;bugs.documentfoundation.org&#x2F;show_bug.cgi?id=138122</a><p>2. <a href="https:&#x2F;&#x2F;opengrok.libreoffice.org&#x2F;xref&#x2F;core&#x2F;vcl&#x2F;inc&#x2F;quartz&#x2F;salgdi.h?r=e7ace1d0#133" rel="nofollow">https:&#x2F;&#x2F;opengrok.libreoffice.org&#x2F;xref&#x2F;core&#x2F;vcl&#x2F;inc&#x2F;quartz&#x2F;sa...</a><p>3. <a href="https:&#x2F;&#x2F;lists.freedesktop.org&#x2F;archives&#x2F;libreoffice&#x2F;2020-December&#x2F;086546.html" rel="nofollow">https:&#x2F;&#x2F;lists.freedesktop.org&#x2F;archives&#x2F;libreoffice&#x2F;2020-Dece...</a>')