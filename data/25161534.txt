Item(by='magicalhippo', descendants=None, kids=[25161883], score=None, time=1605887382, title=None, item_type='comment', url=None, parent=25161152, text='Well, you can add drives to _some_ VDEV types. For a single drive VDEV you can add a drive and it will become a mirror. With a 2-way mirror you can add a drive and it will become a 3-way mirror.<p>However for the RAID-Z variants it&#x27;s more difficult, because of how the parity calculations are done and how the parity is stored. If you have a 5 drive RAID-Z, you can store up to 4 blocks of data for each parity block. With a 6 drive RAID-Z you can store up to 5 blocks of data for each parity block.<p>So if you add a drive to a RAID-Z vdev, the system suddenly needs to keep track of the stripe width that was used when the data was written.<p>In addition it&#x27;s the issue of _where_ the data is stored. If your RAID-Z VDEV is mostly full and you were to add a new drive to it (not that you currently can), then you might not be able to use all of the capacity without further ado.<p>This is because you can only store one block per stripe on the new drive for redundancy to work, a RAID-Z1 can only recover from the loss of one block per stripe. The rest of the blocks in the stripe has to be distributed on the other drives.<p>However, there is work in progress[1] to support RAID-Z expansion.<p>That said, RAID-Z expansion is for expanding one drive at a time. If you&#x27;re adding 20 disks in one go, do it as a new VDEV.<p>[1]: <a href="https:&#x2F;&#x2F;github.com&#x2F;openzfs&#x2F;zfs&#x2F;pull&#x2F;8853" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;openzfs&#x2F;zfs&#x2F;pull&#x2F;8853</a>')