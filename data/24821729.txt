Item(by='agv720', descendants=None, kids=None, score=None, time=1603061080, title=None, item_type='comment', url=None, parent=24820373, text='Isn&#x27;t this code kind of supporting the first point in the article?\nI mean, the article started by pointing how rust &quot;protected&quot; you from a &quot;TTCTTOU&quot; error.<p>This C code is not only not protecting you against that, but also it seems to have little to none error checking. What happens if fopen fails? It just skips to the next file and happily ignores all the entries in the file. What if fget fails?  Again, it stops processing the file and goes to the next.<p>I won&#x27;t even get into what happens if calloc fails and returns null. Or if ++ wraps around and you get a negative value (let&#x27;s hope we are using 64 bits)<p>This program will likely work, but if it doesn&#x27;t you will just get an invalid number and never find out.<p>Don&#x27;t get me wrong, I understand this is &quot;not serious&quot; code, written in a Sunday and for fun. And I would be ok with it if the article wasn&#x27;t about language safety.')