Item(by='sliken', descendants=None, kids=[25211077], score=None, time=1606321655, title=None, item_type='comment', url=None, parent=25210747, text='&gt; The DDR4 bus is 64-bit, how can you have a 128-bit channel??<p>Less familiar with the normal on laptops, but most desktop chips from AMD and Intel have two 64 bit channels.<p>&gt; Which might have downsides of its own.<p>Typically for each channel you send an address, (a row and column actually), wait for the dram latency, and then get a burst of transfers (one per bus cycle) of the result.  So for a 16 bit wide channel @ 3.2 Ghz with a 128 byte cache line you get 64 transfers, one ever 0.3125 ns for a total of 20ns.<p>Each channel operates independently, so multiple channels can each have a cache miss in flight.  Otherwise nobody would bother with independent channels and just stripe them all together.<p>Here&#x27;s a graph of cache line throughput vs number of threads.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;spikebike&#x2F;pstream&#x2F;blob&#x2F;master&#x2F;png&#x2F;apple-m1.png" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;spikebike&#x2F;pstream&#x2F;blob&#x2F;master&#x2F;png&#x2F;apple-m...</a><p>So with 1,2 you see an increase in throughput, the multiple channels are helping.  4 threads is the same as two, maybe the L2 cache has a bottleneck.  But 8 threads is clearly better than 4.')