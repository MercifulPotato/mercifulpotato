Item(by='nh2', descendants=None, kids=None, score=None, time=1602580092, title=None, item_type='comment', url=None, parent=24763222, text='Programs that care about durability should use `openat(int dirfd, char *pathname, ...)` to get an FD on the file after  after getting an FD on the parent dir anyway, instead of using `&#x2F;path&#x2F;to&#x2F;dir&#x2F;file` style paths, because otherwise there&#x27;s always the chance that something in hierarchy was moved away or mounted over.<p>In that case, you always have a handle on the directory.<p>Opening the dir for fsyncing separately after having written the file is similar to doing close()+re-open()+fsync() on a file, which does not provide as strong guarantees as direct open()+fsync(): <a href="https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;37288453&#x2F;calling-fsync2-after-close2&#x2F;50158433#50158433" rel="nofollow">https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;37288453&#x2F;calling-fsync2-...</a>')