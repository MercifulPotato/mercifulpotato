Item(by='tgb', descendants=None, kids=[24946201], score=None, time=1604085527, title=None, item_type='comment', url=None, parent=24945678, text='Right, but what&#x27;s in the doTick of a conveyor belt cell? Presumably it would look something like:<p><pre><code>    if nextCell.isEmpty():\n         moveContentsToNextCell()\n</code></pre>\nBut what happens when you have A connected to B connected to C and A and B have items? It depends upon the execution order of A and B&#x27;s doTicks(). If A&#x27;s runs first then B is still full and so A can&#x27;t advance its contents. If B&#x27;s runs first, then it passes its contents to C and then can receive from A when A runs.<p>You might put the entities into a graph, order them by their connections and run the doTicks in the right order. But you can&#x27;t do that if there are loops in the conveyor belts (which Factorio handles, at least). I haven&#x27;t come up with a trivial modification of this scheme to handle these problems. Do you have to do multiple passes until everything has gotten a chance? Or maybe a priority queue? I&#x27;m not sure. And what if the loop is entirely full? It should advance all the contents one square but may instead get jammed.')