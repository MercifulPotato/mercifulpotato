Item(by='megous', descendants=None, kids=[25926163], score=None, time=1611710760, title=None, item_type='comment', url=None, parent=25922917, text='PAM is fun. <a href="https:&#x2F;&#x2F;github.com&#x2F;systemd&#x2F;systemd&#x2F;issues&#x2F;16813" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;systemd&#x2F;systemd&#x2F;issues&#x2F;16813</a><p>With all the .so modules loading into some process, etc. Some questionable design in sshd makes it lock up completely for all incoming connections when used with PAM and when pam module ends up in infinite loop.<p>Nevermind that systemd pam modules pull in a shitton of stuff, including dbus, into any process that tries to use PAM for auth, these days.<p>I guess it all runs as root, too. sshd at least tries to fork a child for all this and waits for it and kills it, so that the parent process can&#x27;t be polluted. It just has no timeout when waiting for result, and doesn&#x27;t accept further connections when waiting.<p>Sometimes it&#x27;s better not to look too deep under the covers.')