Item(by='itamarst', descendants=None, kids=[24778265], score=None, time=1602690528, title=None, item_type='comment', url=None, parent=24776771, text='1. &quot;Don&#x27;t update system packages&quot; is bad advice. There are base Docker images with out-of-date packages that need security updates. CentOS for example doesn&#x27;t update their base image for months on end.<p>2. Given you do want system package updates, you need to deal with Docker caching breaking your security updates. So you need to rebuild your image from scratch, without caching, either every time there is a security update or on a weekly basis. <a href="https:&#x2F;&#x2F;pythonspeed.com&#x2F;articles&#x2F;docker-cache-insecure-images&#x2F;" rel="nofollow">https:&#x2F;&#x2F;pythonspeed.com&#x2F;articles&#x2F;docker-cache-insecure-image...</a><p>3. Not mentioned: don&#x27;t use build secrets via ARG.<p>Some approaches to secure build secrets:<p>1. BuildKit supports them: <a href="https:&#x2F;&#x2F;docs.docker.com&#x2F;develop&#x2F;develop-images&#x2F;build_enhancements&#x2F;#new-docker-build-secret-information" rel="nofollow">https:&#x2F;&#x2F;docs.docker.com&#x2F;develop&#x2F;develop-images&#x2F;build_enhance...</a><p>2. Via the network, which is a hack, but it works: <a href="https:&#x2F;&#x2F;pythonspeed.com&#x2F;articles&#x2F;docker-build-secrets&#x2F;" rel="nofollow">https:&#x2F;&#x2F;pythonspeed.com&#x2F;articles&#x2F;docker-build-secrets&#x2F;</a><p>3. Via multi-stage builds, but this destroys caching.')