Item(by='anonunivgrad', descendants=None, kids=[25417861, 25417741, 25418217], score=None, time=1607954262, title=None, item_type='comment', url=None, parent=25417211, text='The best way to think about defer is that all the deferred statements are put in a goto label at the end of the block. When you break&#x2F;return&#x2F;whatever, it just jumps to that label first. This just makes slightly more convenient what the standard approach to error handling in C systems programming already is.<p>Looking at the article, this specific implementation doesnâ€™t quite go all the way, requiring a special guard {} block instead of working anywhere. A better implementation, working in any context, would be easy but has to be baked into the compiler.<p>Edit: just saw the proposal for inclusion into the C standard. It is unfortunate that they are considering 1) requiring a guard block and 2) deferring clean up to the end of the function instead of end of the scope. #1 is needless syntax and #2 would make the feature useless within loops by causing explosions and contractions in memory usage.')