Item(by='gumby', descendants=None, kids=None, score=None, time=1603916015, title=None, item_type='comment', url=None, parent=24921822, text='IMHO that&#x27;s a painful level of abstraction to work at.<p>Yes, &#x27;automatic&#x27; variables in C or C++ are just stack allocated objects;, there&#x27;s nothing about a FILE* that makes it automatic or static.  But if you use, for example, streams you can just create one for a file and when it goes out of scope it closes the file and deallocates for you.<p>Likewise I would make a tiny class for my mmap&#x27;ed memory that did whatever cleanup (perhaps searializing data or zeroing pointers into it) before returning the pages to the OS pool.  Sure you can write that code into a unique_ptr deleter and pass that in when you make them, or you could just let the compiler do it for you.<p>I don&#x27;t use C++ in what would typically be called an &quot;object-oriented&quot; way, but this is a perfect example of where I would create a small class as a way of telling the compiler to do some bookkeeping on my behalf.')