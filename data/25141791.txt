Item(by='shortercode', descendants=None, kids=[25141913], score=None, time=1605730173, title=None, item_type='comment', url=None, parent=25140526, text='Codepen uses a system that measures loop duration, and it&#x27;s a giant pain. Having done some pens that do ray tracing and image transforms which can have long running loops. Given the variable execution time of JS it can be quite random. It just exits the loop without warning, causing weird failures in your code.<p>2 theoretical solutions ( with significant overhead ) are:<p>Run the code in a VM ( maybe quick.js compiled to WASM would work ) that suspends code execution periodically if it exceeds a certain duration. This has the advantage that long running code in general won&#x27;t block rendering, not just loops.<p>Transform the AST to use async generator that yields once per loop. This would allow the loop to be suspended and resumed. But it would require a lot of modification to the AST, making effectively the entire call tree async.')