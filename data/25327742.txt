Item(by='m463', descendants=None, kids=None, score=None, time=1607297739, title=None, item_type='comment', url=None, parent=25326540, text='I have always wanted that too.<p>the way to create small docker image is:<p><pre><code>  RUN apt-get install foo &amp;&amp; \\\n    do bar &amp;&amp; \\\n    do more &amp;&amp; \\\n    remove all of the crap you don&#x27;t want\n</code></pre>\nIt should be replaced with actual first-order dockerfile statements<p>You can use multi-stage builds, but they are sort of hacky and do not match your thinking.<p>You can also use --squash but it is a hack too and usually is not available where needed because of experimental.<p>Also, ADD is stupid.<p>You can add a tar.gz file and it will expand it (but you can&#x27;t use -k)<p>You can add the same file using http&#x2F;https, except it WON&#x27;T expand it\nso back to the RUN dilemma you get:<p><pre><code>  RUN apt-get install wget &amp;&amp; \\\n    wget foo.tar.gz &amp;&amp; \\\n    tar xvkf foo.tar.gz -C dir &amp;&amp; \\\n    rm foo.tar.gz</code></pre>')