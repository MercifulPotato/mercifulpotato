Item(by='segfaultbuserr', descendants=None, kids=[24728349, 24727367, 24727228], score=None, time=1602220343, title=None, item_type='comment', url=None, parent=24726801, text='The original secp256k1 developer Russell Oâ€™Connor who was hit by the bug (was on HN [0]) [1] said he rebuilt every package in his system after the bug was identified, and found only 10 lines of code that were miscompiled. Also, note that the bug was found during an attempt to add more test cases, pre-existing code in secp256k1 was not affected.<p>&gt; <i>Three lines are tests. All of the lines could be rewritten as a comparison to 0. None of the lines looked that serious. I am not sure which one is the worse: the reduced message integrity code(?) from some ARCFOUR implementation or the something something from an ATM driver?</i><p>Two unusual conditions are needed to trigger it...<p>&gt; * at least one of the compared byte arrays is constant and has a zero byte in position 0, 1, 2, or 3, <i>and</i><p>&gt;  * the result of the memcmp isn&#x27;t immediately used in a &quot;== 0&quot; or &quot;!= 0&quot; test (or equivalently &quot;if(memcmp(...))&quot; or &quot;if(!memcmp(...))&quot;).<p>&gt; <i>In particular the second condition makes this bug pretty rare and explains why it&#x27;s mostly hit in non-inlined memcmp wrappers. (But in our case we hit it with a &quot;&lt;&quot; comparison. )</i><p>Looks like a critical bug, but doesn&#x27;t look like a conspiracy.<p>[0] <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=24636326" rel="nofollow">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=24636326</a><p>[1] <a href="http:&#x2F;&#x2F;r6.ca&#x2F;blog&#x2F;20200929T023701Z.html" rel="nofollow">http:&#x2F;&#x2F;r6.ca&#x2F;blog&#x2F;20200929T023701Z.html</a>')