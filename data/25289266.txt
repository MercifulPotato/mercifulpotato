Item(by='devit', descendants=None, kids=[25289369], score=None, time=1607006580, title=None, item_type='comment', url=None, parent=25283971, text='Looks like you can achieve an equivalent effect with service workers, like this:<p>1. If no cookie is set, the server inlines all resources in the initial HTML, along with the original URL in a data attribute if not content-hashed, and sets a cookie. Ideally, the inlining is performed so that base64 data is all together for better compression (this can be achieved by putting all scripts in the header and images in the header as CSS background-image values)<p>2. If JavaScript is enabled, a service worker is installed, and all the inlined resources are extracted, put in local storage (or in the browser cache if possible) and will be returned by the service worker<p>3. If JavaScript is enabled, the service worker keeps track of what is cached in the browser and modifies each request to send a bloom filter indicating these resources<p>4. The server later only inlines resources that are not cached by the client, using either the bloom filter if available, or using server-side tracking<p>As far as I can tell this has equivalent latency and bandwidth requirements to having server push plus cache digests, with the disadvantage of requiring JavaScript and slightly higher overhead, but the advantage of being more customizable.')