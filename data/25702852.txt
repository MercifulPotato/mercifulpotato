Item(by='jabl', descendants=None, kids=[25702979, 25702876, 25703487], score=None, time=1610216022, title=None, item_type='comment', url=None, parent=25701959, text='As a word of warning, mmap is fine if the semantics match the application.<p>mmap is not a good idea for a general purpose read()&#x2F;write() replacement, e.g. as advocated in the 1994 &quot;alloc stream facility&quot; paper by Krieger et al. I worked with an I&#x2F;O library that followed this strategy, and we had no end of trouble how to robustly deal with resizing files, and also how to do the windowing in a good way (this was in the time where we needed to care about systems with 32-bit pointers, VM space getting tight, but still needed to care about files larger than 2 GB). And then we needed the traditional read&#x2F;write fallback path anyway, in order to deal with special files like tty&#x27;s, pipes etc. In the end I ripped out the mmap path, and we saw a perf improvement in some benchmark by x300.')