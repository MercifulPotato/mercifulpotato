Item(by='smlckz', descendants=None, kids=[25825434, 25825615, 25823802, 25825634], score=None, time=1610981422, title=None, item_type='comment', url=None, parent=25822036, text='(n+1)%2 = if (n+1) is divisible by 2 then 0 else 1 = (n+1) &amp; 1 = ~(n &amp; 1)<p>((n + (n % 2)) &#x2F;&#x2F; 2) % 2 = ((n + (n &amp; 1)) &gt;&gt; 1) &amp; 1 = ((n &amp; 2) &gt;&gt; 1) ^ (n &amp; 1) = (n ^ (n &gt;&gt; 1)) &amp; 1<p>In human terms, that means XOR of 1, 2, ..., n is:\n(if (n is divisible by 2) then n else 0) + (if ((if (n is divisible by 2) then n else n + 1) is divisible by 4) then 1 else 0)<p>Or, as code: n * ~(n &amp; 1) + (n ^ (n &gt;&gt; 1)) &amp; 1<p>Phew! Can this be made any simpler or smaller?<p>1 ^ 10 = 11, 11 ^ 11 = 0, 0 ^ 100 = 100, 100 ^ 101 = 001, 1 ^ 110 = 111, 111 ^ 111 = 0, 0 ^ 1000 = 1000, ...<p>----<p>If you have some time, take a pen and a paper and think it through, you&#x27;ll really like it...')