Item(by='gizmo686', descendants=None, kids=[25561654], score=None, time=1609177200, title=None, item_type='comment', url=None, parent=25561068, text='Linear types don&#x27;t help here.<p>The complaint is that with lazyIO, even if your code does the write before closing the file, the actual order the operations occur in could change, to put the close first.<p>If you look at the lazyIO documentation, you will see:<p>&gt;Although this module calls unsafeInterleaveIO for you, it cannot take the responsibility from you. Using this module is still as unsafe as calling unsafeInterleaveIO manually. Thus we recommend to wrap the lazy I&#x2F;O monad into a custom newtype with a restricted set of operations which is considered safe for interleaving I&#x2F;O actions.<p><a href="https:&#x2F;&#x2F;hackage.haskell.org&#x2F;package&#x2F;lazyio-0.1.0.4&#x2F;docs&#x2F;System-IO-Lazy.html" rel="nofollow">https:&#x2F;&#x2F;hackage.haskell.org&#x2F;package&#x2F;lazyio-0.1.0.4&#x2F;docs&#x2F;Syst...</a><p>TLDR, don&#x27;t use lazy IO.')