Item(by='dgacmu', descendants=None, kids=[24825140, 24821462], score=None, time=1603056194, title=None, item_type='comment', url=None, parent=24820306, text='Interesting.  I&#x27;ve used this same file for a test on:<p><pre><code>   - I7-7920HQ, MacOS\n       Rust version:  90ms    (rustc 1.47.0 (18bf6b4f0 2020-10-07))\n       C++ version:  340ms   (Apple clang version 12.0.0 (clang-1200.0.32.2))\n\n   - Xeon(R) Gold 6130  (skylake, Ubuntu 20.04)\n      Rust:  76ms  (rustc-1.47.0)\n      C++:  60ms   (gcc version 9.3.0 (Ubuntu 9.3.0-10ubuntu2)), -O3, no PGO\n</code></pre>\nSeems quite CPU and compiler-dependent.  Odd that the results on MacOS were so horrible for C++.<p>And thanks - I&#x27;ve updated the post to include this more-reproducible benchmark, and included both macOS and linux results.<p>One note:  I modified the single threaded one to use walkdir, but that shouldn&#x27;t affect time in a major way.  The macos timings were about the same.<p>And yes, I agree about the top N part. I deliberately tried to remain &quot;algorithm-compatible&quot; with the C++ example; there are lots of tricks to use to speed this up more.  Getting rid of the line-at-a-time processing would be a good start, for example - it results in an unnecessary double-scan of the input.')