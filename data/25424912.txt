Item(by='anderskaseorg', descendants=None, kids=[25426295], score=None, time=1607988965, title=None, item_type='comment', url=None, parent=25424309, text='If the programmer really needs reads and writes through particular pointers to happen in a particular sequence, because the target memory follows different rules than the language ordinarily allows the compiler to assume, then it’s the programmer’s responsibility to use the annotation provided by the language for exactly that purpose: volatile.  If the compiler had to assume that every pointer needs to be treated as volatile, just about all generated code would be be slowed down dramatically.<p>As for locks, the language already has rules about which memory access are allowed to be reordered across lock acquire and release calls.  Otherwise locks wouldn’t work correctly at all.')