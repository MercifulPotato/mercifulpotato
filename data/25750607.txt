Item(by='gpderetta', descendants=None, kids=[25754278], score=None, time=1610474235, title=None, item_type='comment', url=None, parent=25742843, text='The ABI break in libstdc++ has nothing to do with templates and it was not done by mistake.<p>The layout of std::string changed to conform to the new standard; exactly the same thing would have happened if std::string was a C POD type, there is no way around that.<p>In fact libstdc++ to this day still has the option to be compiled with the old ABI.<p>There have been other minor ABI breaks, mostly to fix bugs, which affect only a small number of programs.<p>Pure C libraries have exactly the same ABI stability issues caused by changes in layout of structures; to avoid this C libraries expose only opaque pointer sized handles to heap allocated objects. This is similar to C++ libraries only exposing pointers to virtual interfaces, but for high performance libraries, for example containers, this is not considered acceptable.')