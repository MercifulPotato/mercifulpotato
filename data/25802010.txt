Item(by='yaantc', descendants=None, kids=None, score=None, time=1610803093, title=None, item_type='comment', url=None, parent=25801211, text='<p><pre><code>  &gt; How many pieces of code are out there where an easy x4 speedup could be achieved\n  &gt; today if there were written with batched operations from the start? (It also shows\n  &gt; how limited are the compiler in autovectorizing)\n</code></pre>\nEven before auto-vectorization, I&#x27;d love a functional automated &quot;loop unrolling with interleave&quot; that works on large functions. There is a pragma for this in Clang, but when I checked it in clang-9 it didn&#x27;t work. I&#x27;ll have to try again as v9 is a bit old now. When this is well supported it will avoid easily &quot;filling the pipe&quot; on multiple issues cores when doing batched operations, without having to manually unroll the loops as is done in VPP for example:\n    <a href="https:&#x2F;&#x2F;gerrit.fd.io&#x2F;r&#x2F;gitweb?p=vpp.git;a=blob;f=src&#x2F;vnet&#x2F;ip&#x2F;ip4_forward.c;h=bb70805b4e66f821616946ad895c309e1f08d96f;hb=35ef865678d82b5a6fd3936716de8afb2fd49e60#l1250" rel="nofollow">https:&#x2F;&#x2F;gerrit.fd.io&#x2F;r&#x2F;gitweb?p=vpp.git;a=blob;f=src&#x2F;vnet&#x2F;ip...</a><p>Manual unrolling works, but getting the same effect with a simple pragma on top of the loop looks so much more attractive ;)')