Item(by='scaramanga', descendants=None, kids=None, score=None, time=1610255951, title=None, item_type='comment', url=None, parent=25701959, text='I replicated the tests and discovered kernel&#x2F;libc are both using rep&#x2F;mov for the copy so copy-speed isn&#x27;t the cause of the difference.<p>The cause of the difference is spectre mitigations which now make system call overhead much higher than it should be. So much so that the cost of the additional pagefaults incurred by the inefficient mmap version get dwarfed.<p>With mitigations=off they both perform roughly identically.<p>You could smell a rat anyway because AVX copies may be faster, but not <i>that</i> much faster.')