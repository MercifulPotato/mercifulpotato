Item(by='shakna', descendants=None, kids=None, score=None, time=1609723340, title=None, item_type='comment', url=None, parent=25623175, text='&gt; Busybox also seems to include awk. Would that have been a slightly less terrible choice of implementation language, or even worse?<p>Two parts to that - I don&#x27;t know awk well enough. I would need to re-implement diff&#x2F;patch in awk, or make heavy use of sh anyway.<p>&gt; I was somewhat alarmed for a second there, but at least on bash (version 5.1.4) &quot;set -e&quot; definitely does work inside functions.<p>The number of _exceptions_ to set -e is actually quite a number:<p>&gt; If not interactive, exit immediately if any untested command fails. The exit status of a command is considered to be explicitly tested if the command is used to control an if, elif, while, or until; or if the command is the left hand operand of an &#x27;&#x27;&amp;&amp;&#x27;&#x27; or &#x27;&#x27;||&#x27;&#x27; operator.<p>set -o pipefail only catches some of those, especially the while and ifs that will continue to standout to blow your foot off... But even more import to note: sh is not bash.<p>We&#x27;re talking about POSIX shell. In Busybox&#x27;s case, it is based on ash. Which doesn&#x27;t actually have pipefail to begin with.')