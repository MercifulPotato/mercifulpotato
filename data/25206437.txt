Item(by='lilyball', descendants=None, kids=None, score=None, time=1606284973, title=None, item_type='comment', url=None, parent=25205304, text='What you’ve linked is CoreFoundation’s retain, Objective-C’s can be found in <a href="https:&#x2F;&#x2F;opensource.apple.com&#x2F;source&#x2F;objc4&#x2F;objc4-787.1&#x2F;runtime&#x2F;objc-object.h.auto.html" rel="nofollow">https:&#x2F;&#x2F;opensource.apple.com&#x2F;source&#x2F;objc4&#x2F;objc4-787.1&#x2F;runtim...</a> (look for objc_object::rootRetain).<p>The short answer for why it can’t just be an increment is because the reference count is stored in a subset of the bits of the isa pointer, and when the reference count grows too large it has to overflow into a separate sidetable. So it does separate load and CAS operations in order to implement this overflow behavior.')