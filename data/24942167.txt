Item(by='SloopJon', descendants=None, kids=[24945091], score=None, time=1604065907, title=None, item_type='comment', url=None, parent=24941063, text='If I understand correctly, it&#x27;s a printf-style function for which the %g format code outputs the shortest decimal string that round trips.  This implies that it would output no more than seventeen significant figures, regardless of the requested precision.<p>The first thing I notice is this comment in a later changelog:<p>&gt; I believe we have a very fast numerical conversion that appears to be reliably generating about 15 to 16 digits out output [last digit may be off by 1 or 2 in typical case].<p>If the last digit of a fifteen- to sixteen-digit output is off by one or two, are we sure it round trips?<p>Second, the test coverage for this feature in tests&#x2F;format.cpp looks pretty sparse, and it&#x27;s not obvious to me how the output is verified.<p>Interesting find.  I may play around with this later.<p>Edit: I tried the test cases from here:<p><a href="https:&#x2F;&#x2F;www.exploringbinary.com&#x2F;the-shortest-decimal-string-that-round-trips-examples&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.exploringbinary.com&#x2F;the-shortest-decimal-string-...</a><p>Here&#x27;s the result:<p>format=&quot;%.30g&quot; output=&quot;0.1&quot;<p>format=&quot;%.30g&quot; output=&quot;50388143.06823721984&quot;<p>format=&quot;%.30g&quot; output=&quot;54167628.18&quot;<p>format=&quot;%.30g&quot; output=&quot;9161196241250.051072&quot;<p>The first and third cases output the correct string.  The second case outputs nineteen digits, instead of seventeen, and does not round trip (i.e., it rounded incorrectly).  The last case outputs nineteen digits instead of fifteen, but does round trip.')