Item(by='jeroenhd', descendants=None, kids=None, score=None, time=1607473244, title=None, item_type='comment', url=None, parent=25348089, text='DoH isn&#x27;t blocking anything that any existing application can already bypass. It merely points out the fact that the rise in encryption makes it difficult for third parties to administer the software running your device.<p>DoH will not be extended to allow firewalls to decrypt it. The entire point of DoH is that firewalls cannot do that. It&#x27;s not hard for an administrator to set up their own DoH server, though, so there is no need as long as that server can be configured at the network level. This is currently possible through group policies on Windows and most MDM applications on mobile devices.<p>The nice thing about encryption is that only the software and the server know what is being exchanged. The not-so-nice thing about encryption is that only the software and the server know what is being exchanged.<p>You already can&#x27;t see the difference between your computer connecting to some S3 bucket to download a picture of a cat or malware connecting to a S3 bucket to get a list of IP addresses mapped to host names. It&#x27;s possible to run fully-fledged VPNs that look exactly like normal HTTPS traffic on the network level. DoH changes nothing about that.<p>On enterprise networks, IT administrators can already put measures into place that prevent DoH on support applications and restrict HTTPS connections to trusted hosts (through SNI sniffing + validating the connection). The upcoming encrypted SNI will make this harder, but group policy will be able to disable eSNI on any trusted computers and browsers, leading only untrusted software to be unverifiable, which can then be reasonably classified as malicious.<p>If IT administrators cannot put measures on employees&#x27; devices then... well, they&#x27;ve already lost. Before DoH, they just didn&#x27;t know that they&#x27;d lost yet.<p>Palo Alto currently blocks DoH by decrypting all TLS traffic (ranging from cookie recipes to naked pictures your phone is syncing to the cloud) with a man-in-the-middle attack which requires their certificate authority to be installed on your system. They filter out the DNS requests inside those TLS streams and apply some kind of rule to them. Right now, they can either block the requests or change the contents (as long as the website and&#x2F;or client doesn&#x27;t use DNSSEC).<p>With ODoH, changing the contents will no longer be practical, but blocking the connection will be. Together with decent group policy settings, networks with such a setup should be as safe as they were without ODoH.<p>On a side note: these types of middleboxes are often trying to be transparent and silently violate many standards, breaking stuff that works on every normal network. Stuff like these firewalls are the reason that TLS 1.3 is pretending to be a special type of TLS 1.2 every time it connects, because otherwise some big middlebox vendors&#x27; platforms freak out and kill the connection. I doubt the inevitable transition towards HTTP&#x2F;3 or even HTTP&#x2F;4 will do these boxes much good. I don&#x27;t put a lot of faith in devices like this.')