Item(by='josephg', descendants=None, kids=None, score=None, time=1605364768, title=None, item_type='comment', url=None, parent=25092240, text='&gt; We just need more safe abstractions over posix APIs that cover different use-cases.<p>I reach for lmdb for a lot of small projects. It feels like failure though. We shouldn&#x27;t need things like that just to deterministically save data to disk.<p>&gt; The command shouldn&#x27;t block on fsync.<p>Sure - some operations can and should discard durability for higher performance. Sounds great to me. But maybe you should opt in to that. It certainly shouldn&#x27;t be the <i>only</i> behaviour the kernel provides. If Inkscape crashes halfway through saving my work, it shouldn&#x27;t by default end up in a half-saved state where my file is permanently corrupted.<p>But we can have our cake and eat it too here. It can be as simple as, if you don&#x27;t wrap your write() calls in a filesystem transaction, the behaviour stays the same as it always was. Or maybe the default behaviour is that a write call entirely happens or entirely doesn&#x27;t happen, but you can optionally ioctl(NO_DURABILITY) or something for extra performance in git checkout.<p>I hear you that git checkout performance (and things like it) are important to you. Keeping the current performance of those operations sounds good to me too!')