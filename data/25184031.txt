Item(by='oomo', descendants=None, kids=None, score=None, time=1606111745, title=None, item_type='comment', url=None, parent=25181580, text='Leaving this here as comments on that blog seem broken. TL;DR: access(2) is a bit more lightweight than write(2) for this purpose.<p>Consider the following (from memory, untested):<p>word_t peek(word_t <i>addr, int </i>success) {\n  word_t ret;\n  errno = 0;\n  access(addr, F_OK);\n  if (success)\n    success = (errno != EFAULT);\n  if (errno != EFAULT)\n    ret = *addr;\n  return ret;\n}<p>I first learnt about this trick in <a href="http:&#x2F;&#x2F;www.gcu-squad.org&#x2F;2005&#x2F;08&#x2F;non-ce-n-est-pas-sale%21&#x2F;" rel="nofollow">http:&#x2F;&#x2F;www.gcu-squad.org&#x2F;2005&#x2F;08&#x2F;non-ce-n-est-pas-sale%21&#x2F;</a>')