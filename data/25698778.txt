Item(by='jashmatthews', descendants=None, kids=None, score=None, time=1610182860, title=None, item_type='comment', url=None, parent=25698465, text='Context-threading is a JIT technique. CRuby can optionally use call-threading where each op is a function and dispatch is an infinite loop of function calls. It&#x27;s not the default since direct or token threading are faster but it&#x27;s there.<p>Call-threading looks like this:<p><pre><code>  while(1) { interpreter_state = *virtual_program_counter++(interpreter_state); }\n</code></pre>\nThere&#x27;s an indirect jump here.<p>With context-threading you JIT very simple code which looks like this and has only direct calls:\n  interpreter_state = put1(interpreter_state);\n  interpreter_state = put1(interpreter_state);\n  interpreter_state = plus(interpreter_state);')