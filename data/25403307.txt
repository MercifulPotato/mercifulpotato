Item(by='viraptor', descendants=None, kids=None, score=None, time=1607820996, title=None, item_type='comment', url=None, parent=25402749, text='Even before you get into GPU, it looks like you could do the normalisation here <a href="https:&#x2F;&#x2F;github.com&#x2F;n7olkachev&#x2F;imgdiff&#x2F;blob&#x2F;master&#x2F;pkg&#x2F;yiq&#x2F;delta.go#L13" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;n7olkachev&#x2F;imgdiff&#x2F;blob&#x2F;master&#x2F;pkg&#x2F;yiq&#x2F;de...</a> using _mm_mul_ps or _mm256_mul_ps depending on availability instead of standard math. (CPU based vector processing)<p>There&#x27;s also bound to be some vector compare trick as well which falls back to pixel-by-pixel only for differences.<p>I think there are quite a few simple tricks you could apply here to get a bit more performance... Starting with sacrificing some memory and decoding a chunk of image at a time rather than calling .At(x,y) every time. And maybe improving local cache by dividing the image in `cpu` parts rather than having the work interleaved.')