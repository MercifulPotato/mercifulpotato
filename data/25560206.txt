Item(by='emidln', descendants=None, kids=[25560301], score=None, time=1609171213, title=None, item_type='comment', url=None, parent=25560116, text='I don&#x27;t think monkey patching is required. Although without a dedicated interpreter, you can just do what sbcl does under the hood and maintain what is essentially a tempfile and keep compiling that and reporting the output for every new line&#x2F;block of code. (I don&#x27;t know how sbcl actually works, being a lisp I presume it doesn&#x27;t actually use a tempfile but instead a list in memory of the code the user submitted and then invokes the compiler as needed for new input including the output state as available symbols.)<p>A cycle that went something like:<p><pre><code>    1. Write the line to a file\n    2. Compile file with default flags\n    3. Run binary in gdb causing gdb to dump certain interest info (stack info, variable contents, etc)\n    4. Read the sections&#x2F;symbols and merge this data into the gdb data (maybe get it from gdb)\n    5. Dump this data into your reply and refresh waiting for user input.\n</code></pre>\nYou could have a few basic commands in the repl:<p>Modify the compiler args\nAdd&#x2F;remove&#x2F;edit a line\nAttach gdb.<p>Emacs or vim could easily do this, and I suspect there are people who already do almost exactly this.<p>You could also just use any editor&#x2F;ide with debug integration and keep a scratch file around...')