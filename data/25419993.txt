Item(by='fishywang', descendants=None, kids=None, score=None, time=1607965866, title=None, item_type='comment', url=None, parent=25418182, text='Doing defer in a loop is usually a bug in your Go code. Sure there are legit use cases of it, but in ~90% of the time what you really want to do is (in Go, I haven&#x27;t used C recently so not sure how to do lambdas correctly):<p><pre><code>    for i := 0; i &lt; 10; i++ {\n      func(i int) {\n        defer foo(i)\n        &#x2F;&#x2F; other code\n      }(i)\n    }</code></pre>')