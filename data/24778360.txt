Item(by='lipanski', descendants=None, kids=[24779750], score=None, time=1602692436, title=None, item_type='comment', url=None, parent=24776771, text='One of the most common mistakes I see is not using a .dockerignore file or, better said, relying on .gitignore when calling `COPY` on entire directories. Without a .dockerignore file in place, you could be copying over your local .env files and other unwanted things into the final image.<p>On top of that, you might also want to add `.git&#x2F;` to your .dockerignore file, as it could significantly reduce the size of your image when calling `COPY`.<p>A more subtle issue I&#x27;ve noticed is the fact that `COPY` operations don&#x27;t honour the user set when calling `USER`. The `COPY` command has its own `--chown` argument, which needs to be set if you&#x27;d like to override the default user (which is root or a root-enabled user in most cases).<p>I wrote up a similar article a while back, though it&#x27;s focused on general best practices: <a href="https:&#x2F;&#x2F;lipanski.com&#x2F;posts&#x2F;dockerfile-ruby-best-practices" rel="nofollow">https:&#x2F;&#x2F;lipanski.com&#x2F;posts&#x2F;dockerfile-ruby-best-practices</a>')