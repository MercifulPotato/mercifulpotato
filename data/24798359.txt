Item(by='ncmncm', descendants=None, kids=None, score=None, time=1602832253, title=None, item_type='comment', url=None, parent=24790218, text='Putty has coroutines coded exactly that way -- one huge file, with a case for each spot that does something that could block. A coworker said, &quot;I love it, and I hate myself for loving it.&quot;<p>Clang, and Gcc up to 8, will turn a switch statement with small numeric alternatives into a bitmask constant and a test against the bits. So,<p><pre><code>  switch (c)\n    case&#x27;a&#x27;:case&#x27;e&#x27;:\n    case&#x27;i&#x27;:case&#x27;o&#x27;:case&#x27;u&#x27;:\n      return true;\n  return false;\n</code></pre>\nturns into a range check and a &quot;bt&quot; instruction, effectively<p><pre><code>   !!((1 &lt;&lt; c-&#x27;a&#x27;) &amp; 0x40111)\n</code></pre>\nBUT: Gcc-9 and Gcc-10 both generate, instead, \na jump table 168 bytes long. Microbenchmark\nresults notwithstanding, this seems like a\nradical pessimization.')