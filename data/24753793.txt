Item(by='GuB-42', descendants=None, kids=[24753947, 24755950], score=None, time=1602506415, title=None, item_type='comment', url=None, parent=24753325, text='Even though floating point numbers are usually treated like a black box, most programmers know that they are imprecise, and the common advise is usually &quot;never check for equality&quot;.<p>Ok, fair enough, but how do you compare then? Standard libraries are rarely helpful here, and more often then not, you have to roll your own. Usually, that&#x27;s poorly done. I&#x27;ve seen it done wrong way too many times, and that&#x27;s by competent programmers.<p>Why aren&#x27;t there ULP-based functions in libmath for instance? I shouldn&#x27;t have to cast float to int, do bit manipulations, and break portability for that.<p>Do something like an optimized version of<p><pre><code>    int ulpdiff(double a, double b) {\n        int ret = 0;\n        if (a &gt; b) {\n            while (a &gt; b) {\n                b = nextafter(b, a);\n                ++ret;\n            }\n        } else {\n            while (a &lt; b) {\n                a = nextafter(a, b);\n                --ret;\n            }\n        }\n        return ret;\n    }</code></pre>')