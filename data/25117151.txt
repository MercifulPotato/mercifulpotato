Item(by='yxhuvud', descendants=None, kids=None, score=None, time=1605561860, title=None, item_type='comment', url=None, parent=25116645, text='One thing that has been known for a while is that there are allocation patterns where LibC malloc doesn&#x27;t give back a sufficient amount of pages even when the pages are clean.<p>See for example <a href="https:&#x2F;&#x2F;www.joyfulbikeshedding.com&#x2F;blog&#x2F;2019-03-14-what-causes-ruby-memory-bloat.html#a-magic-trick-trimming" rel="nofollow">https:&#x2F;&#x2F;www.joyfulbikeshedding.com&#x2F;blog&#x2F;2019-03-14-what-caus...</a> . In the end I think the consensus was that jemalloc was just better than invocing malloc_trim, but invoking malloc_trim now and then can certainly be a lot better than using neither malloc_trim or jemalloc.')