Item(by='ot', descendants=None, kids=None, score=None, time=1602521033, title=None, item_type='comment', url=None, parent=24754783, text='It could be made safe by making to_string_t a template and forwarding from_string&#x27;s argument into its storage, if things are not complicated enough already :)<p>Something like this<p><pre><code>    template &lt;class String&gt;\n    struct to_string_t {\n      const String s;\n      ...\n    }\n\n    template &lt;class String&gt;\n    auto from_string(String&amp;&amp; s) { return to_string_t&lt;String&gt;{std::forward&lt;String&gt;(s)}; }\n</code></pre>\nThen the temporary&#x27;s ownership would be passed to to_string_t. Would still have surprising behavior if a the argument is a non-const reference though.')