Item(by='tasty_freeze', descendants=None, kids=[25311053, 25310290, 25310436], score=None, time=1607119265, title=None, item_type='comment', url=None, parent=25296652, text='Don&#x27;t compare floats vs floats with an exact comparison.<p>I&#x27;ve recently seen a version of this error where someone&#x27;s code was calculating how many bits a field needed to be to hold the maximum value they cared about.<p><pre><code>    bits = floor(log(max_value) &#x2F; log(2)) + 1\n</code></pre>\nThis is playing with fire: it trusts that dividing one approximated irrational value divided by another approximated irrational value will yield a ratio equal or greater than the desired value when max_value is a power of two. Depending exactly how those approximations are rounded, log(8)&#x2F;log(2) might return 2.999999999999 (bug!), or it might be 3.000000000 (their assumption), or epsilon more than 3.0 (not a bug).')