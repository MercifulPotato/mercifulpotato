Item(by='nh2', descendants=None, kids=[24802272], score=None, time=1602861571, title=None, item_type='comment', url=None, parent=24785405, text='For those wondering &quot;so, so how do I do it right?&quot;:<p>I was in that situation 4 years ago and did a short write up on it:<p><a href="https:&#x2F;&#x2F;gist.github.com&#x2F;nh2&#x2F;9def4bcf32891a336485" rel="nofollow">https:&#x2F;&#x2F;gist.github.com&#x2F;nh2&#x2F;9def4bcf32891a336485</a><p>It explains how to avoid the 40ms delay and still batch data where possible for maximum efficiency. The key part is that you can toggle the TCP options during the lifetime of the connection to force flushes.<p>Review appreciated.')