Item(by='hansvm', descendants=None, kids=[25556165, 25549506], score=None, time=1609040640, title=None, item_type='comment', url=None, parent=25546446, text='I&#x27;m pretty sure you could also maintain a temp table and use some kind of &quot;insert...where...returning&quot; construct to squeeze that into a recursive query.<p>At a moderate overhead you could also definitely return all seen nodes and a flag to identify them as such as part of your intermediate data at each recursive step.<p>The postgres query optimizer struggles with recursive queries even when well suited to the problem though. Are they actually efficient in sqlite even for trees?')