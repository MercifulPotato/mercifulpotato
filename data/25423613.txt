Item(by='gusttedt', descendants=None, kids=None, score=None, time=1607981401, title=None, item_type='comment', url=None, parent=25418182, text='No, actually none of that. That code has a constraint violation: it uses the variable i outside of its scope. Even if i would be declared on the same level as the guard, this sequence of deferred statements would not do good, but also not much harm. It would call foo with all the same value for i, namely n.<p>To have a good example where defer inside a loop actually does something, you&#x27;d have to capture the value of i. We also have a macro for that in the reference implementation, but that has a much more specialized scope of use.')