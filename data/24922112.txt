Item(by='sigmaml', descendants=0, kids=None, score=1, time=1603908493, title='Ask HN: How to approach this problem functionally', item_type='story', url=None, parent=None, text='Here is a logic that I have to implement in an in-house application that manages attendance, leaves, etc. The following is one of the workflows in leave application processing.<p><pre><code>    if (attendance has been marked for any session of the leave duration) {\n        perform exception processing &#x2F;&#x2F; excluded for simplicity\n        return\n    }\n\n    if (applied leave duration overlaps (partly or fully) with any other currently-valid leave application) {\n        reject and return\n    }\n\n    switch (leave type) {\n    case annual:\n        if (not enough annual leave balance) {\n            reject and return\n        }\n        &#x2F;&#x2F; more annual condition checks\n\n    case carry-forward:\n        if (not enough carry forward leave balance) {\n            reject and return\n        }\n        &#x2F;&#x2F; more carry-forward condition checks\n\n    case paternity, maternity:\n        branch out to eligibility and extent of availability processing &#x2F;&#x2F; excluded for simplicity\n\n    case compensatory-off:\n        if (date against which compensation is availed was working) {\n            reject and return\n        }\n        if (employee did not work on that day) {\n            reject and return\n        }\n        if (that date is already used for compensatory off) {\n            reject and return\n        }\n        &#x2F;&#x2F; more compensatory checks\n\n    case loss-of-pay:\n        &#x2F;&#x2F; several loss-of-pay checks\n\n    &#x2F;&#x2F; several more varieties\n    }\n\n    load the holiday calendar based on employee&#x27;s location\n    load the shift details for the employee\n    calculate effective duration of leave\n\n    insert &#x2F; update all applicable records\n    write audit entries and logs\n\n    send response back\n</code></pre>\nSignificantly simplified logic above excludes things like leave duration crossing year boundary (some counters get reset; new leave quotas may become available).<p>I look forward to guidance on how to approach this from a functional programming perspective. Thanks.')