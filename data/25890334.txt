Item(by='eesmith', descendants=None, kids=None, score=None, time=1611476419, title=None, item_type='comment', url=None, parent=25888646, text='I had to change my public APIs in a backwards-incompatible way. I had a method something like obj.to_string(&quot;abc&quot;) to convert the object into a string in &#x27;abc&#x27; format.<p>I also supported things like obj.to_string(&quot;abc.gz&quot;) to get the record in gzip-compressed form.<p>I also had a from_string() -&gt; obj functions.<p>You can see the problem. I had to change to_string() so it didn&#x27;t allow compression (breaking backwards compatibility) and add a to_bytes() for that functionality, and add type dispatching in the from_string() code to support either byte or strings, with different code paths.<p>And change all the open() calls to use &quot;b&quot;, and to add type checks on user-passed-in file objects to insist on reading bytes (if not isinstance(user_file.read(0), bytes) raise &quot;Must be open in binary mode&quot;) because all of the underlying parsers are in C and the needless decode&#x2F;encode step adds overhead.<p>Oh, and re-write the C extension so it handles both Python 2 and Python 3.<p>That was a really boring 6 weeks.')