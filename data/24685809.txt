Item(by='Someone', descendants=None, kids=None, score=None, time=1601887822, title=None, item_type='comment', url=None, parent=24683398, text='In the limit, that’s arithmetic decoding (<a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Arithmetic_coding" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Arithmetic_coding</a>).<p>An intuitively simple way (but likely not the way this is done in real life) to do this is<p>- treat your stream of random bits as a binary float F in [0,1)<p>- when you need an integer in [0,n), do:\n   F = n<i>F       # F is in [0,n) now\n   r = floor(F)  # desired integer in [0,n)\n   F = F - r     # restores the invariant that F is in [0,1)\n   return r<p>Since F is infinitely long, you have to do this lazily. You can cheat by only do the multiplication up to the bits you need </i>now*, and fill in others by random bits later (that’s an error in the multiplication, but doesn’t matter for this algorithm)')