Item(by='sigmaprimus', descendants=0, kids=None, score=2, time=1609999722, title='Ask HN: Advice on factoring percentages for PWM SSR power driver', item_type='story', url=None, parent=None, text='I could use some help developing a function for controlling the on off timing of a Solid State Relay which is driving the heating element in an electric still.<p>The SSR will only switch while the AC wave is at the zero crossing, thus limiting the minimum switching time to approximately 8.3 ms. For stability I would like to set a minimum of 20 ms switching time.<p>I would also like to set the power level between 0% and 100% in 1% increments. My current solution is using the formula &quot;%Power X 20 = timeOn &#x2F; 2000 - timeOn = timeOff&quot;<p>Although this works, unfortunately it results in longer than necessary on&#x2F;off durations in order to get the intended duty cycle.<p>Eg. A 50% power level would be 1000ms On &#x2F; 1000ms Off. This would not be as efficient and harder on the element as it would be to get 50% power by having the element 20ms On &#x2F; 20ms Off.<p>Hopefully I have explained my problem in such a way that makes sense.  What I believe I need to do is factor the larger fractions created by multiplying the the percentage, down to as small as possible with a &quot;numerator On&quot; or &quot;denominator Off&quot; value of no less than 20ms.<p>Any thoughts or advice or articles&#x2F;tutorials covering this subject would be appreciated.<p>Thanks')