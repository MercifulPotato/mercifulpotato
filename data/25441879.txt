Item(by='chrismorgan', descendants=None, kids=None, score=None, time=1608122764, title=None, item_type='comment', url=None, parent=25441564, text='Ah, that makes a lot of sense and explains the bad idiom. I think, then, that it should be something like this instead?<p><pre><code>  browser.tabs.executeScript({\n    code: `\n      window[&quot;_gaUserPrefs&quot;] = { ioo : function() { return true; } };\n    `,\n    allFrames: true,  &#x2F;&#x2F; And maybe this for good measure?\n    runAt: &quot;document_start&quot;,\n  });\n</code></pre>\n(Spelled browser for WebExtensions, and chrome for most Chromium-based browsers.)<p>This may well be incorrect or incomplete. I’m not properly familiar with the details here. I haven’t made any browser extensions in the WebExtensions era, all I’ve done is plenty of Greasemonkey scripts, where you can use unsafeWindow.eval() for these purposes (and there, if you instead did unsafeWindow._gaUserPrefs = …, you’d run into a SecurityError when the user code tried calling _gaUserPrefs.ioo()).')