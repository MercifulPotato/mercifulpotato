Item(by='patrec', descendants=None, kids=[25325243, 25324588, 25324544, 25325387, 25324665, 25324555], score=None, time=1607268963, title=None, item_type='comment', url=None, parent=25322288, text='&gt; That said very few operating systems actually store MIME types, [...] MIME types are almost always derived from file extensions or magic numbers.<p>OpenDocument is generally a horrible format, but there is one clever aspect about it which I wish more file formats would adopt, but which is I think not widely known. Since it ought to be, here is a quick rundown: All OpenDocument subformats like ODT are zipfiles where the first entry is an <i>uncompressed</i> file with the name &quot;mimetype&quot; that has the  mimetype (e.g. application&#x2F;vnd.oasis.opendocument.text) as content. The way zip files are laid out, this means the string &quot;mimeetype$ACTUALMIMETYPE&quot; ends up next to the pkzip magic numbers right at the beginning at the file and can be robustly detected by sniffing just a few bytes at the start of the file.<p><a href="http:&#x2F;&#x2F;docs.oasis-open.org&#x2F;office&#x2F;v1.2&#x2F;os&#x2F;OpenDocument-v1.2-os-part3.html#MIME_type_stream" rel="nofollow">http:&#x2F;&#x2F;docs.oasis-open.org&#x2F;office&#x2F;v1.2&#x2F;os&#x2F;OpenDocument-v1.2-...</a><p>Sadly, few other zip based file formats seem to do that, in particular docx and family do not. If you ever find yourself in the situation that you design a zip based file format, please adopt it.')