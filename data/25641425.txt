Item(by='jstimpfle', descendants=None, kids=[25654076], score=None, time=1609814767, title=None, item_type='comment', url=None, parent=25626445, text='Thank you, I tried the rope, and I ran a benchmark that creates a rope of length 1G by repeatedly inserting 1023 bytes at random positions. Some notes:<p>When I changed the hardcoded node size from 136 to 1024 bytes, time went down from 3.6 secs to 2.6 secs on my laptop. It kind of plateaued at 1024 bytes. I didn&#x27;t do more extensive testing.<p>What&#x27;s the rationale for the choice of 136? A cache line is usually 64, so the CPU will always end up loading a multiple of that in any case.<p>When I did a rope implementation myself (I don&#x27;t know how it compares in terms of performance) I think I ended up with nodes of 4096 or 8192 bytes size. That was based on a Red-black tree. When I load ~1Gig of data, even with a node size of 4096, there will still be 2^18 nodes, meaning each access requires sth. like 17 child traversals, which seems a lot to me. So I can&#x27;t see myself going down to 200 bytes or less.')