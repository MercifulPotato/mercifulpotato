Item(by='ben509', descendants=None, kids=None, score=None, time=1605274316, title=None, item_type='comment', url=None, parent=25079881, text='Your first choice to edit a config file should be: sudo --edit pathname<p>This trick has the same problem, $() has to be evaluated before sudo sees anything.<p>I see so many people flailing about here, and I&#x27;ve done it myself. So let&#x27;s consider why these tricks don&#x27;t work.<p>sudo is an ordinary command that accepts an environment, a series of words, and whatever filehandles it inherits.<p>Read &#x2F;etc&#x2F;sudoers to note that it&#x27;s then munging its environment per the env_reset and env_keep directives.<p>man sudo notes that it&#x27;s closing non-standard filehandles, by default.<p>And, by design, sudo doesn&#x27;t <i>want</i> you to do clever tricks because it&#x27;s trying to stop you from hacking the Internets.<p>Let&#x27;s also look at what a shell is doing. All a shell really does is munge some environment vars, set up redirections, and ultimately fork itself and run commands.<p>All the redirection, command substitution, process substitution, etc. must take place either before or after the shell forks to run sudo. All the shell can provide to sudo is command line arguments, environment variables, and usually stdin.<p>All the shell can get from sudo is going to be a return code, and whatever it can capture from the stdout and stderr.<p>The &#x27;echo foo | sudo tee -a path &gt; &#x2F;dev&#x2F;null&#x27; trick works because we redirect stdin, and we delegate opening the file for append to the &#x27;tee&#x27; command, which has now been run as the privileged user by sudo, and we ignore the stdout.<p>Likewise, if you want to read a privileged file, var=$(sudo cat foo) will work, because you get sudo&#x27;s stdout.<p>You can try sudo sh -c &#x27;arbitrary shell script&#x27;, but it&#x27;s not good general advice as shells are often banned as a security precaution.<p>Also, if you get curious and want to edit sudoers without locking yourself out by corrupting it, use &#x27;visudo&#x27;. Note that it won&#x27;t prevent you from locking yourself out by removing your own permissions! RTFM, take some notes, and experiment on a machine you have a root account on or can log in via single-user mode.')