Item(by='kenoph', descendants=None, kids=[25594946, 25593636], score=None, time=1609428353, title=None, item_type='comment', url=None, parent=25592607, text='Yep. For a project at my company we are doing pretty much the same as the author&#x27;s (though for another architecture) and we JIT basic blocks on the fly using LLVM + C helpers.<p>Slightly OT, but even by JIT&#x27;ing + caching it&#x27;s not always the case that your code run faster than a simple emulator. It sounds obvious written like this, but we were still surprised in some cases we encountered. But in our case it&#x27;s probably related to the fact that the code we are jitting was not meant to be jitted, so we are doing some ugly things here and there. We also have to support self-modifying code (and that basically means blacklisting the jitter in some address ranges).<p>TL;DR: even with LLVM, emulation is often faster. QEMU tcg is likely faster than both, but it&#x27;s GPL&#x27;d.<p>EDIT: wanted to add that LLVM JIT infrastructure is still moving quite a bit.')