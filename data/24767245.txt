Item(by='mlyle', descendants=None, kids=None, score=None, time=1602607337, title=None, item_type='comment', url=None, parent=24766077, text='In a lot of ways, the original implementation makes a lot more sense than this &quot;optimized&quot; solution.\nSomething like the original brute force, compare all the points&#x27; distances variant is how I&#x27;d be inclined to write one of my unit tests for the grid alignment routines. Trying a few dozen points on a few dozen grid variants is a way to make sure I&#x27;ve not completely screwed up math-- whether off by one, rounding problems, etc, while applying sanity checks on the overall grid code base.<p>This binary search &quot;optimized&quot; abomination is... more difficult to read and reason about than either than the integer math or &quot;brute-force&quot; solutions, and slower to boot. All it has going for it is that it&#x27;s not the absolute slowest choice.<p>It may not be integer math, because we&#x27;ve not been told if the grid is regular... but it certainly is still easier than this.')