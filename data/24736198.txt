Item(by='anarazel', descendants=None, kids=None, score=None, time=1602295149, title=None, item_type='comment', url=None, parent=24735934, text='The &lt; 2MB figure is with huge pages (2MB ones in this case) enabled. I used 16GB of shared_buffers. The measurement at the end shows how much of a difference in memory usage that makes: The page tables use 6.5MB per process without huge pages, 132KB with.<p>So sure, you can have shared buffers set so large that it&#x27;s more than 2MB per process - but there is a fair bit of headroom to 2MB. So I don&#x27;t think it&#x27;s particularly misleading.<p>I think threads are the right call, and that we should move to threads at some point. Partially due to the overhead you mention, but more importantly because there&#x27;s a lot of features that are much harder with separate processes. We have a fair bit of redundant code due to it: one version working with plain pointers, one with pointers differing between processes, do deal with dynamically allocated shared memory for things like parallel query.')