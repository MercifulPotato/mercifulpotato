Item(by='btrask', descendants=None, kids=None, score=None, time=1606068957, title=None, item_type='comment', url=None, parent=25179404, text='Here&#x27;s the actual macro I (sometimes) use:<p><pre><code>    #define FREE(ptrptr) do { \\\n        __typeof__(ptrptr) const __x = (ptrptr); \\\n        free(*__x); *__x = NULL; \\\n    } while(0)\n</code></pre>\nThere might be a better way of doing it though. Also, __typeof__() obviously isn&#x27;t standard C.<p>Edit to add: I&#x27;ve honestly been moving away from using a macro and just putting both statements on one line like in the OP. For something so simple, using a macro seems like overkill.')