Item(by='Joker_vD', descendants=None, kids=None, score=None, time=1604934670, title=None, item_type='comment', url=None, parent=25013194, text='You start with f having type &#x27;a0 -&gt; a1&#x27;, and g having type &#x27;a2 -&gt; a3&#x27;.<p>Looking at the body of f you infer that a0 = a2 and a1 = Foo | a3, after the substitution f has type &#x27;a0 -&gt; Foo | a3&#x27; and g has type &#x27;a0 -&gt; a3&#x27;.<p>Looking at the body of g you infer that a0 = a0 (whew!) and a3 = Bar | (a3 | Foo). Now, the last one is tricky, and here is the point where you can easily get your type inference engine to diverge, but the (least) solution is given by a3 = Bar | Foo (because A = A | B iff A is a superset of B).<p>So, after the final substitution you have &#x27;a0 -&gt; Bar | Foo&#x27; for f and &#x27;a0 -&gt; Bar | Foo&#x27; for g, generalize &#x27;a0&#x27; as appropriate.')