Item(by='dooglius', descendants=None, kids=None, score=None, time=1607967626, title=None, item_type='comment', url=None, parent=25419995, text='The simple solution to me seems to be to just ban use of loops hierarchically between a defer statement and a guard block. The guard block should definitely be kept as using scope seems like it confuses and complicates the notion of scope; for instance, it seems like a footgun if &quot;if(some condition that turns out to be always true) {blah blah}&quot; can&#x27;t be refactored into &quot;blah blah&quot;. Also, using scope seems to make it difficult to use defer in macros.')