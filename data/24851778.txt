Item(by='nbm', descendants=None, kids=None, score=None, time=1603312038, title=None, item_type='comment', url=None, parent=24851359, text='Pretty much any HTTP proxy supports talking a set of negotiated protocol versions&#x2F;features with the client, and a potentially different set of protocol versions&#x2F;features with the server behind it.<p>The high-level flow is pretty much:<p>1) Set up client connection&#x2F;negotiate stuff (TLS, alpn, NPN, blah blah)\n2) Process requests from that client connection\n2.1) Decode request from client connection\n2.2) Manipulate request (add&#x2F;remove headers, ...)\n2.3) Send request to server\n2.3.1) If necessary, create a new connection to server (TLS, alpn, NPN, ...)\n2.3.2) Encode request to server connection\n2.4) Decode response from server connection\n2.5) Manipulate response (add&#x2F;remove headers, ...)\n2.6) Encode response to client connection<p>You can talk totally different protocols from Internet-side client to the proxy, and from the proxy to the server - and multiple layers of proxies in between if you like.  From an app point of view, there&#x27;s essentially no difference.  If you want to for some reason, you can use various headers to do attempt to indicate to the client to upgrade&#x2F;downgrade to particular protocols, but most apps won&#x27;t care about that.')