Item(by='Arnavion', descendants=None, kids=[24656709], score=None, time=1601576681, title=None, item_type='comment', url=None, parent=24654202, text='RAII also follows value scope instead of lexical scope. So if you have a function that creates a value and returns it, the cleanup-via-destructor runs in the scope of the callee, as it should.<p>This doesn&#x27;t work with lexical-scope-cleanup things like golang&#x27;s defer (and bugs me when new languages add it instead of destructors). Instead you either have to document that the caller has to remember to defer-cleanup the result, or you have to do funky things like take a callback that receives the value, invoke the callback and defer-cleanup the value.')