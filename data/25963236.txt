Item(by='cycomanic', descendants=None, kids=None, score=None, time=1611957528, title=None, item_type='comment', url=None, parent=25961329, text='Just for the fun of it I tested what speed up I could get with a naive algorithm and pythran. Based on your description it looks like the I should do the following:<p>def threshold_pixel(img, thr):\n    out = np.zeros_like(img)\n    o = np.mean(img, axis=-1)\n    out[o&gt;thr] = 255\n    return out<p>This runs in ~30ms for a (1024,1024,3) array using numpy on my machine. Using pythran (note I had to explicitely write out the loop for out[o&gt;thr] =255, due to a bug, that I found and just reported), I get a speed of 6.ms (with openmp) and 9ms without (I did not tune the openmp, but this should yield a much higher speedup).<p>P.S.: Just had a look at your project, very cool, I have to try that')