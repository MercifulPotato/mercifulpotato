Item(by='tijsvd', descendants=None, kids=None, score=None, time=1604844076, title=None, item_type='comment', url=None, parent=25024710, text='&gt; Proving that this really gives all lines the same chance of ending up in $l sounds like a fun math exercise.<p>Quick try with recursive proof:<p>Assume all preceding n-1 lines have equal probability of having been picked (p = 1&#x2F;(n-1)). This is clearly true for the baseline n=2.<p>Then for line n, it will replace the picked line with probability p=1&#x2F;n, since that is in the algo. Any previous line will now have p=[1&#x2F;(n-1)] * (1 - 1&#x2F;n) = 1&#x2F;n and the assumption holds.')