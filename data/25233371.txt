Item(by='Cu3PO42', descendants=None, kids=None, score=None, time=1606518393, title=None, item_type='comment', url=None, parent=25232855, text='I understand that Rosetta 2 uses static recompilation &quot;where possible&quot; and only falls back to dynamic when necessary.<p>This is purely speculative but I would assume that it statically recompiles the __TEXT segment of binaries or maybe whatever it can easily figure out is code by following all possible jumps, etc.<p>Then, whenever a page is mapped as executable they could then check if this is part of a memory mapped binary which is statically recompiled or otherwise recompile the code in the page and jump to the now native version.<p>That way JITs should work without fully falling back to interpreting instructions. Things would get tricky when you map some memory both writable and executable, but maybe they&#x27;re pushing the limits on what the spec allows for instruction caches? I&#x27;d have to check my x86 reference manual. Or maybe this is another area where they have some hardware primitive to facilitate a partial recompilation.')