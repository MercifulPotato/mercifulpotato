Item(by='jlokier', descendants=None, kids=None, score=None, time=1609266377, title=None, item_type='comment', url=None, parent=25572228, text='It&#x27;s not quadratic if the way reduce() and JS inlining work together causes this:<p><pre><code>    return prev + DOMPurify.sanitize(mastodonComment);\n</code></pre>\nto end up behaving like this:<p><pre><code>    reduceValue = reduceValue + DOMPurify.sanitize(mastodonComment);\n</code></pre>\nwhich ends up behaving like this:<p><pre><code>    reduceValue += DOMPurify.sanitize(mastodonComment);\n</code></pre>\nwhich ends up being a sequence of in-place string appends.<p>In any good implementation, a sequence of repeated appends takes linear time in the total length of all the appended strings, like join(&#x27;&#x27;).<p>I&#x27;ve just tested this theory in Safari 14.0.2 with a JS console one-liner.  On this browser, both versions take linear time not quadratic, and the test corresponding to the first version even runs slightly faster.<p>The time difference is small though, and you&#x27;re right, the second version is explicitly linear time.  If I had tested with a much older browser (maybe IE8), I think the first version would have taken quadratic time.')