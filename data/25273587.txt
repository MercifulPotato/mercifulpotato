Item(by='yencabulator', descendants=None, kids=None, score=None, time=1606887719, title=None, item_type='comment', url=None, parent=25273270, text='Even if the array overflows the cache, it&#x27;s not too bad for most access patterns. CPUs will easily prefetch data on a linear scan, so the &quot;second half of the array&quot; will most definitely be in cache by the time you get there. And a linear scan-once shouldn&#x27;t even evict too much other stuff out of the cache.<p>In practice, I would let benchmarks decide the array size. Modern CPUs are surprisingly good at prefetching even linked lists, and x86 works weird out-of-order magic and speculation while waiting for memory. My rules of two thumbs were 1) where performance really matters, don&#x27;t trust your intuition, program and benchmark alternative implementations 2) don&#x27;t trust microbenchmarks, e.g. total icache pressure changes whether inlining is good or not.')