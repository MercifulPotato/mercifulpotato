Item(by='aseipp', descendants=None, kids=[25207256], score=None, time=1606292784, title=None, item_type='comment', url=None, parent=25206735, text='AFAIK: Apple Silicon features an MSR you can toggle which swaps the memory model for a core between ARM&#x27;s relaxed model and x86&#x27;s TSO model, all at once. When Rosetta2 launches an app, and translates it, it simply tells the kernel that the process, when given an active slice of CPU time, should use the TSO memory model, not the relaxed one. Only Rosetta2 can request this feature. That&#x27;s about all there is to it, and it does this whether the app is multicore or not (yes TSO is only needed in multicore, but enabling it unilaterally is simpler and has no downsides for emulating single-core x86 apps.)<p>There&#x27;s also a similar MSR for 4k vs 16k page sizes I think, another x86 vs Apple Silicon discrepancy, but I&#x27;m not sure if Rosetta2 uses that, too.')