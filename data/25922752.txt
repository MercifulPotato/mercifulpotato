Item(by='barrkel', descendants=None, kids=[25923225], score=None, time=1611707445, title=None, item_type='comment', url=None, parent=25919124, text='The hot path may be a SET inside an UPDATE which uses a join which needs to touch millions of rows.<p>You can break that query apart and run it in application logic: do some fetches, do application-side joins, do lots of little updates. Or you can write a single piece of SQL. The former is a whole lot more code and will run slower but individually each item will be fast. The latter is a lot less code and runs faster overall, but the single individual SQL statement will be slow.<p>No simple rules. It depends on the application.<p>(Yes, there are middle ways. Break up the giant UPDATE using some kind of batching strategy. Long-running update-heavy transactions aren&#x27;t healthy, particularly for Postgres.)')