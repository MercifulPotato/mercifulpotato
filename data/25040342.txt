Item(by='ridiculous_fish', descendants=None, kids=[25042081, 25041455], score=None, time=1604958349, title=None, item_type='comment', url=None, parent=25038273, text='unsafe is sometimes necessary because Rust&#x27;s safe APIs are needlessly inefficient.<p>For example, consider a function for 16 byte equality:<p><pre><code>    fn equals(v1: [u8; 16], v2: [u8; 16]) -&gt; bool {\n       v1 == v2\n    }\n</code></pre>\nrustc emits a branch to test if v1 and v2 point to the same thing, which is unnecessary (it can never be true!) and can ruin loop vectorization, etc. The useless branch is not serving any safety purpose but requires unsafe to avoid.<p><a href="https:&#x2F;&#x2F;rust.godbolt.org&#x2F;z&#x2F;6973jG" rel="nofollow">https:&#x2F;&#x2F;rust.godbolt.org&#x2F;z&#x2F;6973jG</a><p>The efficient version is quite a bit more verbose :(')