Item(by='scatters', descendants=None, kids=None, score=None, time=1607267157, title=None, item_type='comment', url=None, parent=25323289, text='Rather than storing the offset within the struct, you could store a type-erased pointer to data member:<p><pre><code>    struct M {\n        std::byte M::*p;\n        std::size_t l;\n        template&lt;class C, class T&gt;\n        M(T C::*e) : p{reinterpret_cast&lt;std::byte M::*&gt;(e)}, l{sizeof(T)} {}\n    };\n</code></pre>\nAlso there are ways (not necessarily legal) to convert a pointer to data member to an offset; see the proposal <a href="http:&#x2F;&#x2F;www.open-std.org&#x2F;jtc1&#x2F;sc22&#x2F;wg21&#x2F;docs&#x2F;papers&#x2F;2018&#x2F;p0908r0.html" rel="nofollow">http:&#x2F;&#x2F;www.open-std.org&#x2F;jtc1&#x2F;sc22&#x2F;wg21&#x2F;docs&#x2F;papers&#x2F;2018&#x2F;p090...</a>')