Item(by='pornel', descendants=None, kids=[24664368], score=None, time=1601632270, title=None, item_type='comment', url=None, parent=24659779, text='They&#x27;re surprisingly difficult to use correctly, especially if you&#x27;re trying to build something clever like lock-free data structures.<p>Atomic access can use relaxed memory ordering, meaning that values don&#x27;t actually change immediately for all threads. There are subtle rules about what changes the hardware <i>and the optimizer</i> can delay and reorder. It&#x27;s like playing chess with threads.<p>There&#x27;s also a common pitfall that x86 hardware has more consistent and forgiving behavior than the spec for atomic operations. Broken atomic code may appear to work fine on x86, but fall apart on ARM.')