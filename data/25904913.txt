Item(by='jkrems', descendants=None, kids=None, score=None, time=1611591512, title=None, item_type='comment', url=None, parent=25903307, text='Nice reminder that different kinds of race conditions exist, even without shared mutable data!<p>One thing I wish the article mentioned: In the given example, another solution would have been to make the balance change safe. E.g. `addBalance()` or `updateBalanceIfEqual(old, new)`. Requiring a mutex around each call site that needs to be used correctly (and keeps being used correctly over time) seems like a pretty fragile way out.')