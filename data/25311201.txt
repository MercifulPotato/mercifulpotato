Item(by='sillysaurusx', descendants=None, kids=[25314127, 25311611, 25312047, 25314055, 25312699, 25317516], score=None, time=1607136351, title=None, item_type='comment', url=None, parent=25311153, text='Somehow it takes 4 seconds to un-collapse a toplevel comment in Chrome. E.g. this one: <a href="https:&#x2F;&#x2F;teddit.net&#x2F;r&#x2F;Bossfight&#x2F;comments&#x2F;k6vh5v&#x2F;bearers_of_the_eternal_duel&#x2F;genbcos&#x2F;" rel="nofollow">https:&#x2F;&#x2F;teddit.net&#x2F;r&#x2F;Bossfight&#x2F;comments&#x2F;k6vh5v&#x2F;bearers_of_th...</a><p>Pages also seem to take around 10 seconds to do the initial render. No server problem, just rendering.<p>So if you do use this, I guess don&#x27;t overdo it. :) Or at least profile.<p>I use a 2015 MBP potato laptop. I guess my perf problems aren&#x27;t really relevant. But it handles all modern sites just fine, so it was surprising.<p>Definitely spikes something to 100% on each load: <a href="https:&#x2F;&#x2F;i.imgur.com&#x2F;1fqBDEX.png" rel="nofollow">https:&#x2F;&#x2F;i.imgur.com&#x2F;1fqBDEX.png</a> and the CPU graph is a nice timeline of me reloading teddit.<p>EDIT: Oof. I just did a profiling session to figure out what the heck it was doing:<p><a href="https:&#x2F;&#x2F;imgur.com&#x2F;ilvRkEb" rel="nofollow">https:&#x2F;&#x2F;imgur.com&#x2F;ilvRkEb</a><p>Purple = rendering time. As you can see, it&#x27;s 100% pegged at rendering whenever I uncollapse a thread.<p>So, devs, if you happen to read this, the process is:<p>1. go to <a href="https:&#x2F;&#x2F;teddit.net&#x2F;r&#x2F;Bossfight&#x2F;comments&#x2F;k6vh5v&#x2F;bearers_of_the_eternal_duel&#x2F;genbcos&#x2F;" rel="nofollow">https:&#x2F;&#x2F;teddit.net&#x2F;r&#x2F;Bossfight&#x2F;comments&#x2F;k6vh5v&#x2F;bearers_of_th...</a><p>2. Collapse the toplevel comment <a href="https:&#x2F;&#x2F;imgur.com&#x2F;vjDhTk2" rel="nofollow">https:&#x2F;&#x2F;imgur.com&#x2F;vjDhTk2</a><p>(which is very fast.)<p>3. Activate a profiling session: Command-option-I, click performance tab, command-E to start recording<p>4. Un-collapse the thread<p>5. Stop recording<p>Here&#x27;s the profiling session in case it helps: <a href="https:&#x2F;&#x2F;battle.shawwn.com&#x2F;misc&#x2F;2020-12-04&#x2F;Profile-20201204T185357.json" rel="nofollow">https:&#x2F;&#x2F;battle.shawwn.com&#x2F;misc&#x2F;2020-12-04&#x2F;Profile-20201204T1...</a> No idea if it gives any insight into what&#x27;s going on, but there y&#x27;go.<p>I&#x27;m not sure how they&#x27;d solve this. 98.2% of the time is spent in &quot;Layout&quot;: <a href="https:&#x2F;&#x2F;i.imgur.com&#x2F;tSexr0n.png" rel="nofollow">https:&#x2F;&#x2F;i.imgur.com&#x2F;tSexr0n.png</a><p>Is there even anything you can do to address that kind of perf problem? Yuck. I don&#x27;t envy whoever digs into that one.<p>I tried profiling with &quot;Enable advanced paint instrumentation (slow)&quot; but it seemed to show exactly the same result:<p><a href="https:&#x2F;&#x2F;i.imgur.com&#x2F;V26oOTT.png" rel="nofollow">https:&#x2F;&#x2F;i.imgur.com&#x2F;V26oOTT.png</a><p>&quot;Nodes That Need Layout 3841 of 3987 Layout root#document&quot; seems relevant. So it sounds like the details card is somehow causing a full-page layout for almost every element on the page. Which should be fast, except that every element seems to cause another layout. Or ... something.<p>Not sure if there&#x27;s any other details I could give, but let me know if anyone has ideas.')