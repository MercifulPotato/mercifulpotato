Item(by='chubot', descendants=None, kids=[24741241], score=None, time=1602354918, title=None, item_type='comment', url=None, parent=24740482, text='Yeah this is a good observation.  Some related papers I saved:<p><i>Miniphases: compilation using modular and efficient tree transformations</i>, Odersky et al.<p><a href="https:&#x2F;&#x2F;scholar.google.com&#x2F;scholar?cluster=7946863864036706551&amp;hl=en&amp;as_sdt=2005&amp;sciodt=0,5" rel="nofollow">https:&#x2F;&#x2F;scholar.google.com&#x2F;scholar?cluster=79468638640367065...</a><p>(I&#x27;d be interested if anyone has any knowledge of how this actually worked out in the Scala compiler; I don&#x27;t have experience with it)<p><i>TreeFuser: a framework for analyzing and fusing general recursive tree traversals</i>.  This one said they prototyped it in Clang.<p><a href="https:&#x2F;&#x2F;dl.acm.org&#x2F;doi&#x2F;abs&#x2F;10.1145&#x2F;3133900" rel="nofollow">https:&#x2F;&#x2F;dl.acm.org&#x2F;doi&#x2F;abs&#x2F;10.1145&#x2F;3133900</a><p><i>Deforestation: Transforming programs to eliminate trees</i>, Wadler<p><a href="https:&#x2F;&#x2F;scholar.google.com&#x2F;scholar?cluster=13826873296507613488&amp;hl=en&amp;as_sdt=0,5&amp;sciodt=0,5" rel="nofollow">https:&#x2F;&#x2F;scholar.google.com&#x2F;scholar?cluster=13826873296507613...</a><p>I think the key point is that some of the frameworks introduce restrictions that make it hard to write a big program like a compiler.  There is a hard tradeoff between the amount of fusing that can be done and how expressive the metalanguage is.<p>---<p>related: <a href="https:&#x2F;&#x2F;github.com&#x2F;oilshell&#x2F;oil&#x2F;wiki&#x2F;Compact-AST-Representation" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;oilshell&#x2F;oil&#x2F;wiki&#x2F;Compact-AST-Representat...</a> (compiling programs that operate on trees to operate on packed representations)')