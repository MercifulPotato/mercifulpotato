Item(by='brundolf', descendants=None, kids=[25950946, 25955899], score=None, time=1611874695, title=None, item_type='comment', url=None, parent=25950222, text='Where my mind initially goes is to have a pure function going from id -&gt; records, and then pass those records off to a separate procedure that persists them to the database. The same records can then also be passed around to the UI or whatever else.<p>&gt; Often this would get called several times for the same declaration id, usually generating new records, so it&#x27;s easier to have the function return the id&#x27;s rather than trying to reconstruct what it did.<p>Are the &quot;new&quot; records meaningfully different in some way, or are they just new instances in memory of what is fundamentally the same value? In the former case, there&#x27;s state somewhere that&#x27;s causing each one to be different (there is not a pure relationship from id -&gt; record set). In the latter case, you don&#x27;t actually need multiple instances (unless you expect them to be mutated by other code down the line and are guarding against side-effects, in which case you could defensively clone the pure function&#x27;s result as needed instead of calling it multiple times).<p>Edit: it&#x27;s possible I misunderstood, and that what&#x27;s happening is you&#x27;re inserting data into a database which has its own auto-incrementing IDs that it then returns to you. If so, the coupling between value creation and state&#x2F;mutation exists in the database&#x27;s API itself, and so is outside of your control. There&#x27;s not much you can do in that case because you don&#x27;t own that code.')