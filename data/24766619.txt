Item(by='XCSme', descendants=None, kids=None, score=None, time=1602603568, title=None, item_type='comment', url=None, parent=24763653, text='Thanks for the extra details!<p>I built userTrack mostly as a cheaper alternative for smaller businesses, so they can still have access to good tools&#x2F;data without paying enterprise prices, so the goal was never to support 1M+ monthly sessions, thus I never spent too much time looking into heavy-traffic performance or scaling.<p>&gt; For some websites, there are 20 million+ pageviews for each month. MYSQL goes through all of those 20 million rows (according to EXPLAIN) even with index or composite index (It took a few seconds). So, we had to pre-calculate the number of pageviews each hour and show it to the user.<p>Yes, count usually &quot;goes&quot; through all the rows when using more complex conditions, the way to improve this is usually, as you also did, to pre-calculate the counts using databse triggers (whenever a new row is inserted, the trigger will update the total count).<p>I am not familiar with Clickhouse, but I assume for being so fast it provides at lot fewer features&#x2F;options to store and manipulate data. How hard was the transition to Clickhouse? Where you able to easily convert the DB schema and all quries?')