Item(by='manuel_w', descendants=None, kids=[25615465], score=None, time=1609613099, title=None, item_type='comment', url=None, parent=25608932, text='Can anyone give some examples how a &quot;proper&quot; robot control application looks like? I once was working on an DIY delta robot and the software layout is something I never understood how to do right, I fear.<p>I had no idea how to go about it, and if I remember correctly, I wrote the firmware to do the following every 10ms: (I was bare-metal C&#x2F;C++ on a Cortex-m3.)<p>* Calculate new desired position of effector.<p>* Calculate new desired angle of every stepper motor.<p>* For every stepper motor, calculate deviation between current and desired angle.<p>* Program the timers to generate a PWM signal to make deviation zero. (Note: This whole thing was open loop, so I fed the PWM signal back into a counter to track the motor angles.)<p>Each of these bullet points was implemented as individual function, taking input parameters as function parameters and returning the result as return value.<p>For reference, this is how it looked like: <a href="https:&#x2F;&#x2F;youtu.be&#x2F;9NzlfX5X_W8?t=23" rel="nofollow">https:&#x2F;&#x2F;youtu.be&#x2F;9NzlfX5X_W8?t=23</a><p>At one point, I was wondering if I shouldn&#x27;t just call the last function for the final value, and have it call the previous functions (and thereby calculate the input values) on demand. This would look a bit more functional-like, but I didn&#x27;t see any benefits besides stylistic ones. Is functional programming a thing in embedded robot control software?<p>While building that demonstrator I realized that my attempt at doing so was a very shabby one. It&#x27;s not enough to have in mind the acceleration&#x2F;deceleration of the effector for smooth looks. If you would do things right, you would have to watch the torque and motion parameters of each individual joint. You would probably have to calculate the whole motion profile in advance. But I have no idea how I would go about doing that. Do you simply run a loop and iterate over time? What if you realize you violate some constraints at some point? Adjust some initial values by some fixed offset and run anew? I suppose there are smarter attempts.<p>edit: Not a HN heavy user, wow do I make lists right?')