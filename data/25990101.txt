Item(by='fuhry', descendants=None, kids=None, score=None, time=1612196970, title=None, item_type='comment', url=None, parent=25988196, text='My approach with a recent personal project (i.e. no actual scaling required) was to have the MQTT server just listen on localhost. Application connects without TLS on the loopback interface. Clients connect over WebSocket (TLS) using their existing OAuth access token as the username and &quot;x&quot; as the password. The application involves an API as well so client credentials are already in use.<p>I used jpmens&#x2F;mosquitto-auth-plug &lt;<a href="https:&#x2F;&#x2F;github.com&#x2F;jpmens&#x2F;mosquitto-auth-plug" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;jpmens&#x2F;mosquitto-auth-plug</a>&gt; for the Mosquitto side of things, with a query along the lines of:<p><pre><code>  SELECT &quot;hardcoded password hash&quot; FROM oauth_access_tokens WHERE access_token = &quot;%s&quot; AND scope REGEXP &quot;\\bmqtt\\b&quot;;</code></pre>')