Item(by='londons_explore', descendants=None, kids=[25988596, 25986967], score=None, time=1612170148, title=None, item_type='comment', url=None, parent=25971355, text='I believe this spec is incompatible with the Linux kernel page cache.<p>Imagine this scenario:<p>Someone plugs in a U2F microcontroller and copies a new U2F file to it.<p>The fat filesystem driver can pick any 512 byte sectors to save the data on.  There is no guarantee they are contiguous.<p>Any 512 byte sector written involves <i>reading</i> a 4k page to populate the page cache.<p>It is possible for a 4k page to have a mix of 512 byte sectors that are part of the newly written file and those from the current.U2F from the device.<p>The page cache is written out in an arbitrary order.<p>When that page containing a mix of sectors is written out to the device, it will become flashed with a mix of the new and old firmware images, and won&#x27;t work properly.')