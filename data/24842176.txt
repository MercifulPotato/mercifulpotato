Item(by='oconnor663', descendants=None, kids=[24844149, 24842544], score=None, time=1603226629, title=None, item_type='comment', url=None, parent=24841556, text='In practice, this sort of thing might be most likely to come up with a chars iterator. The natural iteration logic is something like:<p>1) If position == end, the iterator is done.\n2) Otherwise, read the next byte to determine the number of bytes in the next character.\n3) Read all the bytes of the next character, convert them to a regular 32-bit code point, and emit that.<p>In the presence of invalid UTF-8, that iterator is broken. There needs to be an extra check in step 2.5: &quot;Check that the number of bytes reported for the next character doesn&#x27;t exceed the number of bytes remaining in the string.&quot; Iterating over the characters of a string is a pretty common thing to do, and that extra branch is not free.')