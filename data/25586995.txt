Item(by='kentonv', descendants=None, kids=[25587375, 25587660, 25587288], score=None, time=1609367419, title=None, item_type='comment', url=None, parent=25585656, text='&gt; It seems clear enough that protobufs were optimized in a scale that involved a lot of time&#x2F;cost-sensitive reads and far fewer time&#x2F;cost-sensitive writes.<p>Nah, you&#x27;re assuming too much. Protobuf was thrown together in a fairly ad hoc way by a couple (brilliant!) engineers (Jeff and Sanjay) to help make the Google search index protocol easier to maintain. The specific design decisions in Protobuf were not carefully tested or weighed against other possibilities. They just did something that worked well enough, and it worked well enough that it was rapidly adopted by the rest of the company. It was then too late to change anything.<p>Yes, the fact that a variable-width size must be written before the data is a kind of big problem, which essentially requires you to make two passes over the message tree, one to compute sizes and one to write the data. There are some clever optimizations that can reduce the impact, but I don&#x27;t think the designers would make the same decision if starting from scratch with no need to support legacy. But there was no point in history where it was worth breaking compatibility to fix this issue, so that&#x27;s how it remains. It&#x27;s a problem, just not that big a problem.<p>(I maintained Protobuf for several years, including writing version 2 and open sourcing it.)')