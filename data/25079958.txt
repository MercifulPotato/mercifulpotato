Item(by='jchw', descendants=None, kids=[25082337, 25084144, 25080324, 25081809], score=None, time=1605252880, title=None, item_type='comment', url=None, parent=25079247, text='Sidenote: Bluetooth audio is not in a dire state, at least compared to Windows. Let me compare my experience on Windows 10 2004 to a fairly vanilla NixOS PulseAudio configuration. Same Bluetooth chipset, same headphones (Sony WH1000XM3s.)<p>On Windows:<p>- Obviously, in Windows, you get the Bluetooth stack automatically, as well as drivers. So I did not have to do any setup. It is possible, though, that some alternate drivers would work better than the default ones, which seem to be buggy.<p>- Pairing is fairly straight forward. However, sometimes it doesn&#x27;t work quite right: the device will connect but not function right, sometimes leading to all Bluetooth devices failing to pair or connecting and disconnecting rapidly. This may be related to the driver, although it is using the default driver.<p>- Playback seems fine when it works. Sometimes it is randomly choppy. My understanding is that Windows 10 supports aptX but not aptX HD, and I can&#x27;t get it to show up in traces but I suspect aptX is likely the codec being used. SBC is really &#x27;good enough&#x27; for most cases though, so it&#x27;s not a big deal.<p>- Routing leaves something to be desired. Every single time the device is paired, anything that plays audio needs to be moved or explicitly restarted for it to work. For example, Firefox or Edge tabs playing music typically have to be reloaded even if i unpair and repair the headphones during playback. It also interacts ridiculously poorly with my Realtek drivers, also Windows 10 defaults. I typically have to jump into the weird mixer and try to get everything right when switching between the two, and some apps like Discord act a little weird even then.<p>On NixOS:<p>- Not all distros will require this, but NixOS naturally requires configuration by its nature. Here is my audio-related config, in its entirety:<p><pre><code>      hardware.pulseaudio = {\n        enable = true;\n        daemon.config = {\n          flat-volumes = &quot;no&quot;;\n          resample-method = &quot;speex-float-10&quot;;\n        };\n        extraModules = [ pkgs.pulseaudio-modules-bt ];\n        package = pkgs.pulseaudioFull;\n      };\n      hardware.bluetooth = {\n        enable = true;\n        package = pkgs.bluezFull;\n      };\n      nixpkgs.config.pulseaudio = true;\n      environment.systemPackages = with pkgs; [\n        pavucontrol pulsemixer broadcom-bt-firmware\n      ];\n</code></pre>\nMost of this is NixOS specific. Some of it is personal: I disable flat-volumes because I do not like flat-volumes. I switch the resampler to a different one to prevent aliasing artifacts. (This may seem like audiophile non-sense, but it actually impacted real-time resampling chibi-tech&#x27;s album &quot;The Mutual Promise&quot; which has 18-20 kHz sounds in it, designed to sync to some Pripara toys. Pretty interesting stuff.)<p>In any case, it&#x27;s the whole config. I don&#x27;t think I ever had to trial-and-error it, I just followed the manual. So not too bad.<p>Honestly, I fully expected it would not work. And for a long time, I never tried the setup. However, a few months ago I tried it. Here is what I found:<p>- Pairing works. I have yet to hit an issue where pairing does not work.<p>- Playback works, and using either Blueman or the PulseAudio mixer it is trivial to switch between A2DP codecs or, if for some reason one would want to do it manually, HSP. Once again, I have not noticed problems. I tend to use the Sony LDAC codec since it seems most appropriate for the headphones.<p>- Routing seems okay too. I do still sometimes run into a situation where I need to switch an app manually, but it&#x27;s easy to do in the PulseAudio mixer.<p>My verdict is that the Linux Bluetooth Audio situation is not bad. Yes, no ordinary Windows user could stomach the Nix configuration in my Nix setup. However, you can notice the lack of hacks needed here: clearly, Bluez and PulseAudio are now up to the task of handling Bluetooth Audio &quot;correctly&quot;. I haven&#x27;t tried but I suspect Debian or Fedora would, with a couple of packages installed, handle Bluetooth devices just fine so as long as the Bluetooth chipset is supported.<p>Bonus: In the future, Pipewire will take over for Bluetooth audio. For the time being it is limited to SBC and can&#x27;t handle other codecs yet, but I gave it a shot and it seems to work just fine, too. Hopefully that holds into the future.')