Item(by='wenc', descendants=None, kids=[24736627], score=None, time=1602279173, title=None, item_type='comment', url=None, parent=24732789, text='I consider myself a fan of SQL, but my nitpick is more around named calculated columns. For instance:<p><pre><code>    SELECT AVG(col1) OVER (PARTITION BY col2) AS partcol1\n    FROM tbl\n    WHERE AVG(col1) OVER (PARTITION BY col2) &gt; 10.0\n</code></pre>\nI wish I could just do:<p><pre><code>    SELECT AVG(col1) OVER (PARTITION BY col2) AS partcol1\n    FROM tbl\n    WHERE partcol1 &gt; 10.0\n</code></pre>\nBut I can&#x27;t, because the WHERE clause is processed before the SELECT clause.<p>So if I have a bunch of these and want a convenient way to work with the named columns, I have to wrap them into a common table expression:<p><pre><code>    WITH cte AS (\n        SELECT AVG(col1) OVER (PARTITION BY col2) AS partcol1\n        FROM tbl\n    )\n    SELECT partcol1\n    FROM cte\n    WHERE partcol1 &gt; 10.0\n</code></pre>\nSo wordy.')