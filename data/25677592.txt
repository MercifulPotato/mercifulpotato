Item(by='corty', descendants=None, kids=[25679370, 25677878, 25682941, 25678119, 25679996, 25677836], score=None, time=1610054174, title=None, item_type='comment', url=None, parent=25675355, text='This is extremely ugly. They got rid of ESNI because it was an incomplete solution possibly exposing the connection target anyways. So they decided to encrypt the whole client hello message, calling it ECH (encrypted client hello).<p>However, to make it work, they need the server&#x27;s public key out of DNS. To get that, they didn&#x27;t rely on preexisting TLSA records intended for this purpose (partly because it wouldn&#x27;t work in some cases, TLSA can either contain fingerprints or pubkeys). Instead, they defined a whole new DNS record type to publish those keys. But those records, called SVCB, don&#x27;t just publish keys. They are an amalgamation of SRV records (this service called &quot;something&quot; is actually at that host and port), CNAME records and a list of key&#x2F;value-properties with associated priorities. If you think you might know that one, yes, it looks almost like all of DNS inside DNS again. Just another Meta-DNS, because all those RRs aren&#x27;t fancy enough already. Or maybe Cloudflare just wants a way to put all their internal routing info into DNS somehow.<p>Anyways, I&#x27;ll wash my eyes with soap now...')