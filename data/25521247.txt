Item(by='tyhoff', descendants=None, kids=[25525972, 25522535, 25521590, 25523307, 25523961, 25522983], score=None, time=1608752221, title=None, item_type='comment', url=None, parent=25508896, text='Author here. Firmware, for better and worse, is stuck in C&#x2F;C++ land, so many of the topics here are essential to keep a complex, multi-MCU, multi-board setup in working order.<p>I&#x27;m actually really curious what you all do in C&#x2F;C++ to <i>prevent</i> bad operations from ever being performed in the first place.<p>For example, should we just change our internal malloc &#x2F; free to use double pointers instead?<p><pre><code>  bool malloc(size_t n, void **ptr) {\n    *ptr = &lt;memory&gt;\n  }\n\n  void free(void **ptr) {\n    ... &lt;free&gt;\n    *ptr = NULL \n  }\n</code></pre>\nThis way, if anyone actually tries to use that pointer, it will crash the system (hardfault), instead of potentially using corrupted memory, which IMO is much worse.')