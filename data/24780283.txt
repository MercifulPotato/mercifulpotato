Item(by='xfalcox', descendants=None, kids=[24780457], score=None, time=1602702242, title=None, item_type='comment', url=None, parent=24780127, text='PostgreSQL upgrades are indeed one of the use cases we have with the gem, the way we do it is:<p>1. Have app configured to connect to both main and replica.<p>2. Connect to the rails console and tell the app to stay in read only mode until told otherwise.<p>3. Disable replication<p>4. Upgrade main to new PostgreSQL version<p>5. Tell the app to move back to read-write mode<p>6. Re-create the replica<p>This flow helped us do hundreds of PostgreSQL major version upgrades in AWS RDS this quarter when we moved from PG 10 to 12.<p>And this is just a plus, using the gem during normal operations means that if a Redis or PostgreSQL main explodes for any reason the app keeps serving traffic, albeit in read-only.<p>&gt; Automatic failover to the follower during this process would likely confuse things.<p>I believe here the problem is mostly naming. The gem &quot;failover&quot; to read-only mode to a replica, it doesn&#x27;t promote replicas to main ever. Naming is hard.')