Item(by='stabbles', descendants=None, kids=[24841341], score=None, time=1603221327, title=None, item_type='comment', url=None, parent=24840970, text='Right, I see what you&#x27;re getting at. Just taking a slightly less trivial example from Intel&#x27;s docs, and superficially comparing the assembly they generate to what LoopVectorization.jl can do, I guess there is some hope at least:<p><pre><code>    julia&gt; function simple!(ys, xs)\n             @avx for i = eachindex(xs)\n               ys[i] = if xs[i] &lt; 3.\n                  xs[i]^2\n               else\n                  sqrt(xs[i])\n               end\n             end\n           end\n</code></pre>\nThis generates vbroadcastsd, vpcmpgtq, vmulpd, vsqrtpd, vblendvpd and vmaskmovpd AVX2 instructions (I don&#x27;t have AVX512). But more complex control flow does indeed not work; the `@avx` macro errors it can&#x27;t handle it at the moment.')