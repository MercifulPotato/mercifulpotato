Item(by='m0zg', descendants=None, kids=[24995776], score=None, time=1604551616, title=None, item_type='comment', url=None, parent=24994709, text='I&#x27;ve done this back in iPhone 3 era, and even made a few thousand dollars on the App Store when you could still make money there.<p>You could improve this by adding a state machine to the algorithm. Basically, only count _repeat_ events, not single events. When you start walking, you start &quot;provisionally&quot; recording the peaks, which can be done fairly easily, but unless it&#x27;s N peaks or more (IIRC 4 was a good number) within a certain period of time, you don&#x27;t count those events and don&#x27;t display them. Once you enter the steady state, count all events. This eliminates a lot of the &quot;steps&quot; that would be recorded due to user fumbling with the device, or other singular, non-step events. This, plus some tuning of the LPF yields an excellent pedometer.<p>I don&#x27;t know how it is now, but back in the day the phone would turn off the accelerometer if you lock the screen, and there were also no background tasks of any kind, other than those pre-installed by Apple. So I also had a music player in the app, as well as a fake &quot;lock screen&quot; that would leave the program running, but looked like a real lock screen. The battery would be gone in about 3 hours - this was before the advent of &quot;energy efficient&quot; cores. Total hack, but people paid for it and left good reviews.')