Item(by='SQLite', descendants=None, kids=None, score=None, time=1608389791, title=None, item_type='comment', url=None, parent=25474422, text='That bug was fixed long ago, even before the referenced video\nwas produced.<p>The described attack is clever.  It exploits the fact that\nan attacker might alter the schema so that it invokes an SQL\nfunction with side-effects when an app simply tries to read\nfrom a table.  And depending on those side-effects, an exploit\nmight be possible. In the video, there was a bug in a built-in\nSQL function that caused exploitable side-effects.  But that bug\nwas fixed long before the video was even produced.  The examples in the video were from an older version of SQLite.  They did not work for the latest SQLite release on the day that lecture was given.<p>Since the checkpoint.com attack was described (in the video and elsewhere) new defense-in-depth features have been\nadded to SQLite to make similar exploits increasingly unlikely.<p>(1) Built-in SQL functions that have side effects cannot be\nused in the schema.  Side-effect functions can only be invoked\ndirectly by the application.<p>(2) When applications register their own custom SQL functions, they can now mark those functions as &quot;direct-only&quot;, meaning that they are prohibited in the schema.<p>(3) Run-time and compile-time options are available to prohibit the use of SQL functions in the schema that are not explicitly declared to be safe for use in the schema - that is, functions without side effects.  This is for use in legacy applications that might have been created before the per-function flag that prohibited use within the schema was available.  It is also an extra layer of defense for complex applications that might add hundreds or thousands of side-effect SQL functions - to ensure that the &quot;direct-only&quot; flag is not accidentally omitted from one of them.<p>(4) Run-time options are available to disable triggers and views in applications that do not need them.  This is not necessary to avoid an exploit, but it does provide an additional layer of defense.<p>See <a href="https:&#x2F;&#x2F;sqlite.org&#x2F;security.html" rel="nofollow">https:&#x2F;&#x2F;sqlite.org&#x2F;security.html</a> and especially paragraph 1.2 item 8 for additional information.')