Item(by='notaplumber', descendants=None, kids=None, score=None, time=1604322946, title=None, item_type='comment', url=None, parent=24964966, text='File descriptor passing has been a common technique in privilege separation design, used quite extensively in OpenBSD software. Other notable examples include Google&#x27;s chrome. It&#x27;s quite astonishing to not even seen it mentioned once.<p>Combined with security features like pledge(2) on OpenBSD, which has distinct sendfd&#x2F;recvfd promises, and unveil(2), an unprivileged process can have its access to the filesytem and other system attack surface (system calls, ioctls) and only be able only act on file descriptors passed by a privileged parent.<p><a href="https:&#x2F;&#x2F;man.openbsd.org&#x2F;pledge.2" rel="nofollow">https:&#x2F;&#x2F;man.openbsd.org&#x2F;pledge.2</a><p><a href="https:&#x2F;&#x2F;man.openbsd.org&#x2F;unveil.2" rel="nofollow">https:&#x2F;&#x2F;man.openbsd.org&#x2F;unveil.2</a><p>A skeleton example of a common style for OpenBSD privsep daemons, which uses imsg(3), an abstraction around the underlying sendmsg&#x2F;SCM_RIGHTS functionality.<p><a href="https:&#x2F;&#x2F;man.openbsd.org&#x2F;imsg_init.3" rel="nofollow">https:&#x2F;&#x2F;man.openbsd.org&#x2F;imsg_init.3</a><p><a href="https:&#x2F;&#x2F;github.com&#x2F;tmux&#x2F;tmux&#x2F;blob&#x2F;master&#x2F;compat&#x2F;imsg.c" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;tmux&#x2F;tmux&#x2F;blob&#x2F;master&#x2F;compat&#x2F;imsg.c</a><p><a href="https:&#x2F;&#x2F;github.com&#x2F;tmux&#x2F;tmux&#x2F;blob&#x2F;master&#x2F;compat&#x2F;imsg.h" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;tmux&#x2F;tmux&#x2F;blob&#x2F;master&#x2F;compat&#x2F;imsg.h</a><p><a href="https:&#x2F;&#x2F;github.com&#x2F;krwesterback&#x2F;newdctl" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;krwesterback&#x2F;newdctl</a><p><a href="https:&#x2F;&#x2F;github.com&#x2F;krwesterback&#x2F;newd" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;krwesterback&#x2F;newd</a>')