Item(by='Doman', descendants=None, kids=[24886061], score=None, time=1603631366, title=None, item_type='comment', url=None, parent=24884735, text='We implemented KISS state machine based on TCP timeouts and server response.<p>Pseudocode:<p><pre><code>  Send msg to server\n    if socket timeout:\n      reinit socket and send again\n  Recv from server\n   if recv.msg != &#x27;ok&#x27;:\n     send again\n   else\n     remove msg from storage\n\n\n</code></pre>\nOne message has from few to few hundreds Kilobytes. Messages are stored and sent as custom binary data for better compression (better that protobuffs).\nZMQ takes complexity of raw tcp sockets away and this is what we needed it for. As much and as little.')