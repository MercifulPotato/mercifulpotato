Item(by='drablyechoes', descendants=None, kids=[24784886], score=None, time=1602689791, title=None, item_type='comment', url=None, parent=24777190, text='We use `sops`[1] to do this and it works really well.<p>There is a Google Cloud KMS keyring (for typical usage) and a GPG key (for emergency&#x2F;offline usage) set up to handle the encryption&#x2F;decryption of files that store secrets for each application&#x27;s deployment. I have some bash scripts that run on CI which are essentially just glorified wrappers to `sops` CLI to generate the appropriate `.env` file for the application, which is put into the container by the `Dockerfile`.<p>Applications are already configured to read configuration&#x2F;secrets from a `.env` file (or YAML&#x2F;JSON, depending on context), so this works pretty easily and avoids depending on secrets being set in the `ENV` at build time.<p>You can also, of course, pass any decrypted values from `sops` as arguments to your container deployment tool of choice (e.g. `helm deploy foo --set myapp.db.username=${decrypted_value_from_sops}`) and not bundle any secrets at build time at all.<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;mozilla&#x2F;sops" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;mozilla&#x2F;sops</a>')