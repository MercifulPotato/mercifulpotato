Item(by='kazinator', descendants=None, kids=[24925714], score=None, time=1603928145, title=None, item_type='comment', url=None, parent=24924987, text='If n is unsigned short then -n means n is first promoted to either int, or unsigned int: the first of those two types which holds all values of unsigned short. Then the - operation is taking place on the resulting value in that promoted type.<p>An example where unsigned short promotes to unsigned int are platforms where sizeof(short) == sizeof(int). E.g. 16 bit systems where short and int is 16 bits, and long is 32: compilers for 8086 and such.<p>If the promotion goes to int, the subsequent - is safe; there is no way the resulting value can be that problematic most negative int of two&#x27;s complement.<p>On two&#x27;s complement systems, even if the - is signed, if you convert the value back to unsigned short, you will get the two&#x27;s complement value, as if the calculation was done in the unsigned type all along.<p>For instance a 16 bit unsigned short value of 65535 (0xFFFF) will go to 65535 of type int, which will go to -65535, which will then map to 1 if converted to unsigned short.')