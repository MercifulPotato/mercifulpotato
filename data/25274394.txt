Item(by='bjoli', descendants=None, kids=None, score=None, time=1606897966, title=None, item_type='comment', url=None, parent=25274173, text='In a language like guile scheme or racket this could be implemented as a macro. In guile, the (define-inlinable ...) Is already defined as a macro, and while doing it in reverse would be harder it could be done and tested in an hour.<p>I would probably do it by overriding (define ...) to make it also store the source of the function somewhere and make (inline ...) just insert it as an anonymous function:<p><pre><code>    (define (square x) (* x x))\n    (inline square 5)\n</code></pre>\nThe last call would be expanded to<p><pre><code>    ((lambda (x) (* x x) 5)\n</code></pre>\nWhich the guile inliner always in-lines.')