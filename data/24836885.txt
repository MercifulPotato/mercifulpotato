Item(by='fwsgonzo', descendants=None, kids=[24837704, 24837836], score=None, time=1603199670, title=None, item_type='comment', url=None, parent=24836440, text='It&#x27;s weird because out of all the languages I have made a special environment for, Zig is the only one I couldn&#x27;t figure out how to. For example, how to write global asm? How to call the Zig main function? I guess I need a trampoline? I have an emulated env with no filesystems and such things, where you just communicate using system calls - so nothing special, however since you can&#x27;t just use the standard libraries I have to set the environment up myself. That is fine. It&#x27;s also cross-compiled.<p>For rust I had to add some custom linker flags, use global_asm for the startup code, and then with no_std I could just call my own main function. The only really annoying part of the whole thing is that there is no feature in Rust to force a function to not be removed. I could override the global allocator to make allocations very fast.<p>For C&#x2F;C++, it&#x27;s the same as in Rust, except you can use __attribute__((used)) to make a function not get removed. It&#x27;s also easy to override memory- and string-functions if you have system calls that do these things faster. Overall the C&#x2F;C++ environment was the fastest.<p>For Nim, I only had to use C++ as a backend, and then call NimMain(), add a few extra flags, and it would just work. I only wish that Nim was more popular.')