Item(by='tda', descendants=None, kids=None, score=None, time=1609935103, title=None, item_type='comment', url=None, parent=25656859, text='In postgresql 12 a patch [0] is merged to remove the optimization fence certain conditions. From the changelog [1]<p>&quot;\nAllow common table expressions (CTEs) to be inlined into the outer query (Andreas Karlsson, Andrew Gierth, David Fetter, Tom Lane)<p>Specifically, CTEs are automatically inlined if they have no side-effects, are not recursive, and are referenced only once in the query. Inlining can be prevented by specifying MATERIALIZED, or forced for multiply-referenced CTEs by specifying NOT MATERIALIZED. Previously, CTEs were never inlined and were always evaluated before the rest of the query.\n&quot;<p>[0] <a href="https:&#x2F;&#x2F;git.postgresql.org&#x2F;gitweb&#x2F;?p=postgresql.git;a=commitdiff;h=608b167f9f9c4553c35bb1ec0eab9ddae643989b" rel="nofollow">https:&#x2F;&#x2F;git.postgresql.org&#x2F;gitweb&#x2F;?p=postgresql.git;a=commit...</a>\n[1] <a href="https:&#x2F;&#x2F;www.postgresql.org&#x2F;docs&#x2F;12&#x2F;release-12.html" rel="nofollow">https:&#x2F;&#x2F;www.postgresql.org&#x2F;docs&#x2F;12&#x2F;release-12.html</a>')