Item(by='tzs', descendants=None, kids=None, score=None, time=1602995883, title=None, item_type='comment', url=None, parent=24813795, text='Here is how we had our database deletion error, about 15 years ago. Our DBs had been on leased servers at a hosting company in New York City. They were getting out of the datacenter business so we had to move. We were moving to colocated servers at a Seattle datacenter.<p>This was the procedure:<p>1. Restore DB backups in Seattle.<p>2. Set up replication from NYC to Seattle.<p>3. Start changing things to read from Seattle, with writes still going to NYC.<p>4. After everything is reading from Seattle and has been doing so with no problems for a while, change the replication to be two-way between NYC and Seattle.<p>5. Start switching writes to Seattle.<p>6. After both reads and writes are all going to Seattle and it has been that way for a while with no problems, turn off replication.<p>7. Notify me that I can wipe the NYC servers, for which we had root access but not console access. I wasn&#x27;t in the IT department and wasn&#x27;t involved in the first 6 steps, but had the most Unix experience and was thought to be the best at doing a thorough server wipe.<p>My server wipe procedure was something like this.<p>8. &quot;DELETE FROM table_name&quot; for each DB table.<p>9. &quot;DROP TABLE table_name&quot; for each DB table.<p>10. Stop the DB server.<p>11. Overwrite all the DB data files with random data.<p>12. Delete all the DB data files.<p>13. Delete everything else of ours.<p>14. Uninstall all packages we installed after the base system install.<p>15. Delete every data file I could find that #14 left behind.<p>16. Write files of random data to fill up all the free space.<p>The problem was with step #6. They declared it done and turned it over to me for step #7 without actually having done the &quot;turn off replication&quot; part of step #6. Step #8 was replicated to Seattle.<p>It took them a while to figure out that data was being deleted and why that was happened.<p>We were split across three office buildings, and the one I was in had not yet had phones installed in all the offices, and mine was one of the ones with a phone. None of the people whose offices did have phones were in, so they lost a few more minutes before realizing that someone would have to run a couple blocks to my office to tell me to stop the wipe.<p>It took about 12 hours or so afterwards for them to restore Seattle from the latest backup, and then replay the logs from between the backup time and the start of the deletes.<p>After that they were overly cautious, taking a long time to let me resume the NYC wipe. They went right up to the point where I told them if we didn&#x27;t start <i>now</i> we might not finish, and reminded them that those machines had sensitive customer personal information on them and were probably going to end up being auctioned off on eBay by the hosting company. They came to their senses and told me to go ahead.')