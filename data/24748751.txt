Item(by='tylerhou', descendants=None, kids=[24749568], score=None, time=1602447411, title=None, item_type='comment', url=None, parent=24748603, text='To be clear, the context of the thread is &quot;why do we need to partition the HTTP cache per domain.&quot; My example code works under the (soon-to-be-false) assumption that the cache is NOT partitioned (i.e. there is a global HTTP cache).<p>&gt; In that case, the browser would always load the asset (it is not cached).<p>Agreed, if the cache is partitioned per domain AND the current domain has not requested the resource on a prior load. If the cache is global, then the asset will be loaded from cache if it is present: <a href="https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&#x2F;Request&#x2F;cache" rel="nofollow">https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&#x2F;Request&#x2F;cac...</a><p>&gt; So the rule would be that only stuff that is directly in the &lt;head&gt; may be cached (or stuff that is on the same domain).<p>You could be more precise here: with a domain-partitioned cache, all resources <i>regardless of domain</i> loaded by any previous request on the same domain could be cached. So if I load HN twice and HN uses <a href="https:&#x2F;&#x2F;example.com&#x2F;image.jpg" rel="nofollow">https:&#x2F;&#x2F;example.com&#x2F;image.jpg</a> on both pages, then the second request will use the cached asset.')