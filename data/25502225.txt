Item(by='eyelidlessness', descendants=None, kids=None, score=None, time=1608604247, title=None, item_type='comment', url=None, parent=25502025, text='I’m curious why three call sites isn’t sufficient. Any time I find I have three instances of the same non-trivial logic, I immediately think of whether there’s a sensible function boundary around it, and whether I can name it. If I can, it’s a good candidate.<p>Obviously for trivial logic that’s less appealing. And obviously all the usual abstraction caveats (too many options or parameters are a bad sign, etc) apply.<p>The risk with so much duplication is that if the logic is <i>expected</i> to remain the same, even tests won’t catch where they diverge. To me that’s just as risky if not more with internal call sites than with clients, as at least client drift will be apparent to other users.')