Item(by='jcelerier', descendants=None, kids=None, score=None, time=1607187467, title=None, item_type='comment', url=None, parent=25315225, text='&gt; Beyond the ergonomics, `std::variant` is horribly outperformed by basic type erasure mechanisms or inheritance.<p>uh, I have yet to see variants beaten by inheritance in practice - in particular as soon as you have type erasure all your containers have an additional level of indirection (which can be solved partially by Boost.PolyCollection but that adds its own layer of complexity) and that has been a much bigger perf-killer - with variants memory is nicely packed when iterating over your array of values and that&#x27;s by <i>far</i> the biggest performance thing you can do. You also need to allocate memory dynamically everywhere which is a no-go in a lot of cases.')