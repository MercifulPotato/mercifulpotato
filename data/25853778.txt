Item(by='dmbarbour', descendants=None, kids=None, score=None, time=1611188811, title=None, item_type='comment', url=None, parent=25853668, text='FP is relatively convenient for metaprogramming, yes. GADTs and tagless-final encodings (or as I think of them, Church-encoded ASTs) are especially useful for this.<p>But it wouldn&#x27;t be a big difference if the host language was heavily imperative, so long as it favors immutable data structures. The FP aspect for this exploration of DSLs is much more social and cultural than technical.<p>I think that if we really want to decouple AST from evaluation context, the main tool we&#x27;d need is to deconflate module &#x27;import&#x27; into separate steps to &#x27;load&#x27; a module&#x27;s AST and &#x27;integrate&#x27; definitions, allowing for intermediate processing. This requires some host language changes, elimination of module-global state, etc..')