Item(by='mindvirus', descendants=None, kids=None, score=None, time=1610992561, title=None, item_type='comment', url=None, parent=25818126, text='One of the trickiest segfaults I tracked down:<p>We had this old and stable code that was writing and reading from some shared memory. One day out of the blue it started deadlocking and segfaulting, even with no recent changes to it.<p>It turned out to be an educational sequence of events:<p>- the library for daemonizing processes had a bug - it closed stdout but didn&#x27;t open to &#x2F;dev&#x2F;null.<p>- our shared memory then got stdout&#x27;s file number.<p>- independently, a shared library had some code that started writing to stdout... now our shared memory.<p>- so the logs clobbered the shared memory<p>Was hard to track down until I used xxd to look at the shared memory.')