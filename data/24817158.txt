Item(by='dredmorbius', descendants=None, kids=None, score=None, time=1603021812, title=None, item_type='comment', url=None, parent=24815807, text='Or do the case-conversion, minimum word-length restriction, and counting in awk itself, here using associative arrays:<p><pre><code>  awk &lt; file &#x27;\n    {\n      $0=tolower($0);  # lowercase conversion\n      gsub( &quot;[^a-z ]&quot;, &quot;&quot;, $0); # remove non-alpha + space chars\n      for(i=1;i&lt;=NF;i++0) {\n        # increment word count if word length &gt; 2\n        if(length($i)&gt;2) count[$i]++ \n        }\n      }; \n    END{ \n      # report\n      for(word in count) printf( &quot;%-20s %i\\n&quot;, word, count[word]\n    }\n  &#x27; | sort -k2nr -k1\n</code></pre>\nThis omits the header (can be trivially added).  The external sort can be internalised in gawk using asort(), or by printing to sort via a command:<p><pre><code>  cmd=&quot;print -2kr -k1&quot;\n  for&lt;loop&gt; printf( &lt;args&gt; ) | cmd\n  close(cmd)</code></pre>')