Item(by='kibwen', descendants=None, kids=None, score=None, time=1611592397, title=None, item_type='comment', url=None, parent=25904432, text='<i>&gt; I assume the &quot;five heap allocations&quot; is kinda tongue in cheek? My understanding is that while it is good to avoid heap allocations, given this is a called-once piece of code, it&#x27;s not really a big deal?</i><p>Indeed. :) I can&#x27;t envision a circumstance where avoiding exactly five small allocations outside of any loop would be observable in either time or memory usage. As a Rust programmer it simply provides a warm and fuzzy feeling to avoid allocations in places where it not only doesn&#x27;t obscure the code, but actually makes it shorter. At best, this could be a small step towards running your code on embedded hardware (which isn&#x27;t unreasonable for an emulator like this), but only if you were to also eliminate all other allocations within your program.')