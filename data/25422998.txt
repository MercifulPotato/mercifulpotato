Item(by='dasyatidprime', descendants=None, kids=None, score=None, time=1607978580, title=None, item_type='comment', url=None, parent=25422579, text='Not round-tripping prefixes breaks other things, and this is around where I start more thoroughly agreeing that XML namespaces tried to do too much at once: mainly, there are XML-based definitions, I think including XPath and XSLT&#x27;s use of it (or old XSLT&#x27;s use of what might not have been XPath yet?), that use the ambient namespace prefix set as context for interpreting attribute values that contain XML names. If you might ever interchange some prefixes, you might even get similar “looks valid but means the wrong thing” problems.<p>And if you try to combine namespaces with DTDs (which is just an explosive mix to start with, and I think is just recommended to never do) you get other problems, because you&#x27;re no longer allowed to add arbitrary namespace declarations in the middle, so anything that round-trips prefixes but might ever add redundant declarations of them won&#x27;t reliably produce something that DTD-validates, and if you&#x27;re transforming <i>into</i> a DTD from something that might have used other namespaces, you have to make sure to remove all the extra declarations, and…<p>Note that <i>most</i> of this is still “well-defined”, it&#x27;s just awkwardly hairy. This is not to be taken as an excuse to implement the standard badly or incorrectly if you&#x27;re going to handle it at all.')