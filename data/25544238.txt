Item(by='jiyunomegami', descendants=None, kids=[25544737], score=None, time=1608998970, title=None, item_type='comment', url=None, parent=25541838, text='Duff&#x27;s device output cut due to length limit, but here you go:\nCL-USER&gt; (vacietis::cstr-noeval &quot;\nvoid send (char * to, char * from, int count) {\nint n = (count + 7) &#x2F; 8;\nswitch (count % 8) {\ncase 0: do { * to++ = * from++;\ncase 7: * to++ = * from++;\ncase 6: * to++ = * from++;\ncase 5: * to++ = * from++;\ncase 4: * to++ = * from++;\ncase 3: * to++ = * from++;\ncase 2: * to++ = * from++;\ncase 1: * to++ = * from++; } while (--n &gt; 0); } }\nint main () {\n char tobuf[32];\n memset(tobuf, 0, sizeof(tobuf));\n char*  from = \\&quot;Duff the magic dragon&#x27;s device!\\&quot;;\n send(tobuf, from, 31);\n printf(\\&quot;from: %s\\\\n\\&quot;, from);\n printf(\\&quot;  to: %s\\\\n\\&quot;, tobuf);\n return 0;\n}&quot;)\n(PROGN\n(PROGN (DECLAIM (FTYPE (FUNCTION (*  *  * ) T) SEND)) (VACIETIS::VAC-DEFUN&#x2F;1 SEND (TO FROM COUNT) (DECLARE (TYPE (SIGNED-BYTE 32) COUNT))\n  (PROG*  ((N (VACIETIS.C:INTEGER&#x2F; (VACIETIS.C:+ COUNT 7) 8)))\n (DECLARE (TYPE (SIGNED-BYTE 32) N))\n (VACIETIS.C:SWITCH (VACIETIS.C:% COUNT 8)\n   (1 2 3 4 5 6 7 0)\n(0\n (VACIETIS.C:DO\n  (TAGBODY\n (VACIETIS.C:=\n  (VACIETIS.C:DEREF* \n   (PROG1 TO\n(VACIETIS.C:= TO (VACIETIS.C:PTR+ TO 1))))\n (VACIETIS.C:DEREF*  (PROG1 FROM (VACIETIS.C:= FROM (VACIETIS.C:PTR+ FROM 1)))))\n  7 (VACIETIS.C:= (VACIETIS.C:DEREF*  (PROG1 TO (VACIETIS.C:= TO (VACIETIS.C:PTR+ TO 1)))) (VACIETIS.C:DEREF*  (PROG1 FROM (VACIETIS.C:= FROM (VACIETIS.C:PTR+ FROM 1)))))\n  6 ...  )))))))\n (PROGN\n  (DECLAIM (FTYPE (FUNCTION NIL (SIGNED-BYTE 32)) MAIN))\n  (VACIETIS::VAC-DEFUN&#x2F;1 MAIN NIL (DECLARE)\n(PROG*  ((TOBUF (MAKE-ARRAY 32 :ELEMENT-TYPE &#x27;(SIGNED-BYTE 8)))\n(FROM (VACIETIS:STRING-TO-CHAR*  &quot;Duff the magic dragon&#x27;s device!&quot;))) (DECLARE (DYNAMIC-EXTENT FROM)\n(TYPE (SIMPLE-ARRAY (SIGNED-BYTE 8) (32))\n  TOBUF)\n(DYNAMIC-EXTENT TOBUF))\n   (MEMSET TOBUF 0 32)\n   (SEND TOBUF FROM 31)\n   (PRINTF (VACIETIS:STRING-TO-CHAR*  &quot;from: %s\n&quot;) FROM)\n   (PRINTF (VACIETIS:STRING-TO-CHAR*  &quot;  to: %s\n&quot;) TOBUF) (RETURN-FROM MAIN 0)))))<p>Once you evaluate the above, you can call main from lisp.')