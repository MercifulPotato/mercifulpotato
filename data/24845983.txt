Item(by='chubot', descendants=None, kids=None, score=None, time=1603270465, title=None, item_type='comment', url=None, parent=24844296, text='Yeah at some point I should write a blog post, but here is a pretty good condensed summary of it:<p><a href="https:&#x2F;&#x2F;old.reddit.com&#x2F;r&#x2F;ProgrammingLanguages&#x2F;comments&#x2F;jb5i5m&#x2F;help_i_keep_stealing_features_from_elixir_because&#x2F;g8urxou&#x2F;" rel="nofollow">https:&#x2F;&#x2F;old.reddit.com&#x2F;r&#x2F;ProgrammingLanguages&#x2F;comments&#x2F;jb5i5...</a><p>The mycpp tool I wrote can be thought of as a cross between this old &quot;Shed Skin&quot; project, and mypyc:<p><a href="https:&#x2F;&#x2F;www.oilshell.org&#x2F;cross-ref.html#mycpp" rel="nofollow">https:&#x2F;&#x2F;www.oilshell.org&#x2F;cross-ref.html#mycpp</a><p>I kept extensive notes on the process on Zulip, list of threads ehre:<p><a href="http:&#x2F;&#x2F;www.oilshell.org&#x2F;blog&#x2F;2020&#x2F;03&#x2F;recap.html#mycpp-the-good-the-bad-and-the-ugly" rel="nofollow">http:&#x2F;&#x2F;www.oilshell.org&#x2F;blog&#x2F;2020&#x2F;03&#x2F;recap.html#mycpp-the-go...</a><p>Really short summary: I used the MyPy front end, and basically printed its AST as C++.  This involves a bunch of hacks, but it works.<p>The following conditions helped a lot:<p>- I control all the code in Oil, so I can statically type all of it, which involves both annotations and occasional patches.  A shell doesn&#x27;t have many Python library dependencies; i.e. it doesn&#x27;t depend on BeautifulSoup or something like that.  It&#x27;s basically all string and data structure manipulation, with a few sys calls.<p>- Oil has extensive tests.  I run the same tests against the translated and compiled C++, which flushes out bugs in the translator.  (Something like 915 out of 1700 tests pass now, so the translation process isn&#x27;t done.)<p>- I also used unit tests to generate some of the type annotations with pyannotate.<p>There is still some translation left to do if anyone is interested in helping.  You will probably learn something about both Python and C++!')