Item(by='jstimpfle', descendants=None, kids=None, score=None, time=1602314673, title=None, item_type='comment', url=None, parent=24737036, text='I don&#x27;t know why this is downvoted. This is exactly how it is.<p>The first time the compiler reads the include file, it remembers where the corresponding #endif is for each #if. The next time the file is included, the compiler can skip over the whole included file. There is no performance advantage from outsourcing the conditional to every including location.<p>Putting an ifndef guard at the location where the file located is not workable. It&#x27;s terrible boilerplate. To the relatively simple &#x27;#include &lt;A.h&gt;&#x27; another variable that must be synchronized with dependencies gets added. Plus 2-3 lines for the conditional. At each including location.')