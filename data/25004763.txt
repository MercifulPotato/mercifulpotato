Item(by='MuffinFlavored', descendants=None, kids=[25006901, 25005890], score=None, time=1604635265, title=None, item_type='comment', url=None, parent=25003542, text='&gt; All of that to deploy a bunch of standard applications in a single server<p>usage: deploy_app &quot;commit message, push right to master!&quot;<p><pre><code>    deploy_app () {\n      git add --all :&#x2F;\n      git commit -m &quot;$1&quot;\n      git push\n    \n      ssh user@server &lt;&lt;EOF\n        cd app&#x2F; &amp;&amp;\n        git reset --hard &amp;&amp;\n        git clean -df &amp;&amp;\n        git fetch &amp;&amp;\n        git reset --hard origin&#x2F;master &amp;&amp;\n        sh scripts&#x2F;deploy.sh\n      EOF\n    }\n</code></pre>\ndeploy.sh<p><pre><code>    #!&#x2F;bin&#x2F;sh\n    set -e\n    # java\n    sh scripts&#x2F;rebuild.sh java-api\n    # node.js\n    sh scripts&#x2F;rebuild.sh api\n    sh scripts&#x2F;rebuild.sh cron\n    sh scripts&#x2F;rebuild.sh ui\n    sh scripts&#x2F;rebuild.sh windows-api\n    sh scripts&#x2F;rebuild.sh ws\n    # terraform\n    sh scripts&#x2F;apply.sh\n    # nginx\n    docker restart nginx\n    # sql\n    sh scripts&#x2F;migrate-database.sh\n</code></pre>\nRebuilds Docker images, taints the Terraform Docker resources')