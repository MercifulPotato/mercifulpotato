Item(by='KMag', descendants=None, kids=None, score=None, time=1608257039, title=None, item_type='comment', url=None, parent=25462782, text='Most tracing GC solutions would run into the same problem.  A common implementation strategy of the classic three-color collector puts the grey bit in the object header (and often also the white&#x2F;black bit).  A two finger (Cheney-style) collector avoids an explicit grey bit, but moves objects around, which also triggers CoW of shared pages.<p>If you want CoW-friendly GC, you need to move your color bits &#x2F; reference counts to be all together in the headers of your GC arenas instead of being in the object headers.  That way, your high mutation bits are all together in a small number of pages.  Those pages with the color bits&#x2F;counters end up not being shared across processes, but at least they&#x27;re all packed together to minimize the number of affected pages.')