Item(by='davidbanham', descendants=None, kids=None, score=None, time=1606195976, title=None, item_type='comment', url=None, parent=25194916, text='Years ago I was shipping a language learning app for high school students. It was aggressively cross-platform across iOS, OSX, Android and Windows. We made a big effort to make as much of the code platform-agnostic as we could.<p>The app had a lot of big video and audio assets split up across various modules. Each language had a bunch of different proficiency levels which each had their own content pack. All the packs together totalled something north of 5 gig so we allowed users to download and install the packs on an as-needed basis.<p>This fetching code was implemented using the HTML5 FileSystem API (which incidentally was deprecated by W3 halfway through the development cycle, but that&#x27;s another story). This was great as it allowed us to have this code be completely platform-agnostic!<p>The only problem was that it had horrendous memory leaks. I was sure we had a bug in our JavaScript code somewhere. We spent A Million Years combing through heap dumps and reviewing our code trying to get to the bottom of it. We tapped contacts at both Adobe and Apple to try and help us figure it out and nobody could.<p>Until... Until we hit on exactly the correct google-fu to find a a bug report about memory leaks relating to file handles in the WebKit project. We updated our version of Electron and the newer version had a version of WebKit that contained the fix. No matter what strings we pulled, though, we couldn&#x27;t get Apple to give us any information about what version they shipped on iOS or whether they were likely to incorporate the patch any time soon.<p>In the end it was moot because the global head office based in the UK got wind of the project and axed it because it might threaten _their_ cross-platform educational content packaging strategy. Which they&#x27;d been working on for something like 3 years. Which still hadn&#x27;t borne any fruit. Nor did it look likely to any time soon. (But that&#x27;s another story).<p>Memory leaks can be maddening. The problem is always with your code, it&#x27;s never in the platform. Except when it isn&#x27;t and it is.')