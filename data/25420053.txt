Item(by='dooglius', descendants=None, kids=[25420225], score=None, time=1607966038, title=None, item_type='comment', url=None, parent=25418182, text='Some commenters are claiming this issue can be worked around by using by-reference capture, but the following code still requires dynamic allocation:<p><pre><code>  void reverse_bitstream(void * read_ctx, void * write_ctx) {\n    guard {\n      while(has_more_bits(read_ctx)) {\n        int b = read_bit(read_ctx);\n        if     (b == 0) defer write_bit(write_ctx, 0);\n        else if(b == 1) defer write_bit(write_ctx, 1);\n      }\n    }\n  }</code></pre>')