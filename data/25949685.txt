Item(by='just_for_you', descendants=None, kids=[25956319], score=None, time=1611869980, title=None, item_type='comment', url=None, parent=25948573, text='I would agree on BMP being slightly insane, since there&#x27;s a number of things you have to magically know about it:<p>1) If using 8 bits per pixel or less, there&#x27;s always a color palette between the header and bitmap. If more than 8bpp, then there&#x27;s none.<p>2) If more or equal to 8BPP, you must know that you must <i>always</i> use Bitfields to specify which bytes correspond to which RGB(A) channels, and that there cannot be any overlap between the channel masks.<p>3) There&#x27;s no intuitive way to tell which version of the Bitmap file you have (there&#x27;s like 5 major versions).<p>4) You can specify, inline, the Chromaticity and Gamma (basically an inline color profile) somewhere in the headers.<p>5) You can also append an ICC profile directly into the file, OR, store a Windows-style filesystem path to the profile (in which case, you must know to ignore the in-header color profile, if you have one).<p>6) You must know that RLE compression only works if the RGB channels cleanly map to one-byte-each (no packing).<p>7) RLE compression doesn&#x27;t work if you use a negative height (to indicate the image is encoded from top-to-bottom, rather than the standard bottom-to-top).<p>8) The (un)official documentation Microsoft hosts states that BMP files can also store PNG or JPEG bitstream data, but yet no application that I&#x27;ve seen has ever explicitly supported this.<p>9) You have to know that Windows only supports 2 or so variations of packed 16-bit BMP files (565, etc).<p>For the most part you can just assume you&#x27;re dealing with a v5 BMP file, read or write the most pertinent parts like the dimensions (skipping dumb stuff like ICC profiles, pixels-per-meter and whatnot), and just have your way with the raw data. But there is still some dumb stuff in there that shouldn&#x27;t be there, considering it should be a straight-forward format. What also baffles me is that even with the bloat Microsoft added to the format, BMP isn&#x27;t even extensible. So it&#x27;s kinda the worst of both: It&#x27;s slightly complicated to the point of not being straight-foward to work with, and yet, you can&#x27;t add extra info&#x2F;metadata to it.<p>On that note, Targa is a dreamy image format. It&#x27;s got a simple 18-byte or so header, and then the raw data. And, optionally, for Targa v2 you can append a few bytes in a footer that indicate an offset for an optional standard-targa-metadata area, as well as an option metadata area for your data you wish to add to the file. Followed by a magic string, that explicitly indicate you&#x27;re using v2 of the Targa spec.')