Item(by='ajuc', descendants=None, kids=None, score=None, time=1607957657, title=None, item_type='comment', url=None, parent=25417309, text='It was pretty good code as far as PL&#x2F;SQL goes. All the functions were divided into packages and followed this template:<p><pre><code>    function (inParam1, ..., inParamN, outParam1, ..., outParamN, outMessage): ReturnType \n    begin\n        savepoint SP_begin;\n        -- do stuff\n        \n        outMessage := &#x27;...&#x27;;\n        return RESULT_OK;\n    exception\n       when ...\n       when others then\n          rollback to SP_begin;\n          outMessage := &#x27;...&#x27; || exception details || &#x27; ...&#x27;;\n          return RESULT_ERROR;\n    end;\n</code></pre>\nIt&#x27;s funny how I remember this after more than 10 years :)<p>Made it very easy to add tests and to interoperate with container-managed-transactions in EJB3.<p>I even added an debug-only interceptor on EJB that created a savepoint before calling any PL&#x2F;SQL and checked if that savepoint was still valid after the call. If no - that&#x27;s a PL&#x2F;SQL that isn&#x27;t following the template and the developer who changed it needs to be flogged ;)')