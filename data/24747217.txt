Item(by='contravariant', descendants=None, kids=[24747244], score=None, time=1602435618, title=None, item_type='comment', url=None, parent=24747022, text='Arguably the Right Answer wouldn&#x27;t filter on a generator of all permutations but would generate the permutations in a way that didn&#x27;t include invalid ones to begin with.<p>Something like:<p><pre><code>    def extend(perm):\n        for k in range(1,11):\n            if k not in perm and isprime(k + perm[-1]):\n               yield [*perm, k]\n        \n    perms = [[]]\n    for _ in range(10):\n       perms = [extend(perm) for perm in perms]\n</code></pre>\n(This is just a draft, but you get the gist)')