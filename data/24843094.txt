Item(by='vlovich123', descendants=None, kids=None, score=None, time=1603234201, title=None, item_type='comment', url=None, parent=24842648, text='Fantastic article!<p>Could the kernel restrict the AVX use to memcpy to&#x2F;from user buffers &amp; to use a different API so that it was clear at the syscall boundary when that save&#x2F;restore would be needed (+ you could potentially restrict the number of AVX registers used)? That way it wouldn&#x27;t have the concerns of replacing all memcpy operations within the kernel &amp; would just focus on I&#x2F;O operations from userspace.<p>Or is the space for potentially stashing away the AVX registers for each thread also a major concern rather than just the cost of doing so?')