Item(by='quotemstr', descendants=None, kids=[25056075], score=None, time=1605070747, title=None, item_type='comment', url=None, parent=25053238, text='The real problem is here:<p>&gt; It uses D-Bus to ask accounts-daemon how many users there are, but since accounts-daemon is unresponsive, the D-Bus method call fails due to a timeout. (In my testing, the timeout took around 20 seconds.) Due to the timeout error, the code does not set the value of priv-&gt;have_existing_user_accounts. Unfortunately, the default value of priv-&gt;have_existing_user_accounts is false, not true, so now gdm3 thinks that there are zero user accounts and it launches gnome-initial-setup.<p>I am sick and tired of programs trying to continue onward somehow after encountering &quot;impossible&quot; error conditions or tripping over arbitrary timeouts. Failing fast when something looks funny is essential to the creation of a secure system. When you write something like the gdm3 code above --- which, when it runs into trouble, clears any ambient error and pretends that the system has no current users --- you may think you&#x27;re doing the user a favor by continuing to operate, but what you&#x27;re doing is in fact willfully entering some unknowable and unexplored region of the system&#x27;s state space, usually one full of dragons and anthrax.<p>What you want to do instead is just die when something goes wrong. gdm3 should respond to a failure to contact org.freedesktop.Accounts with either a hard lockup or a forced restart of the gdm3 daemon.')