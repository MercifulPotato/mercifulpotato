Item(by='josephernest', descendants=None, kids=None, score=None, time=1606603084, title=None, item_type='comment', url=None, parent=25240701, text='<p><pre><code>    except ValueError:\n        print(&#x27;Incorrect key or file corrupted.&#x27;)\n</code></pre>\nSo if there is a tag problem, this is clearly logged, and you know something is wrong. The good thing is that you can easily edit it and have instead (pass the filename fn to the function, to be able to log):<p><pre><code>     print(&#x27;Incorrect key or file corrupted, will be deleted:&#x27;, fn)\n     os.remove(fn)\n     exit(...)     \n</code></pre>\nReal question: is it possible to `.verify(tag)` before having decrypt(...) the whole file? I doubt it is possible. So an option could be to write the file in a temporary place, and then, only when tag is verified, move it to the right place. Delete it if it is not verified. Another option would be to do a first pass of decrypt(), without writing anything to disk, then get the tag, verify it, and then if ok, redo the whole decryption with writing on disk this time. The latter might be a bit too extreme and halfs the performance.')