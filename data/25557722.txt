Item(by='jart', descendants=None, kids=[25557764], score=None, time=1609145294, title=None, item_type='comment', url=None, parent=25557539, text='If anyone&#x27;s curious, here&#x27;s the link to memcpy() as it&#x27;s actually implemented in the Cosmopolitan headers: <a href="https:&#x2F;&#x2F;github.com&#x2F;jart&#x2F;cosmopolitan&#x2F;blob&#x2F;de09bec215675e9b0beb722df89c6f794da74f3f&#x2F;libc&#x2F;str&#x2F;str.h#L252" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;jart&#x2F;cosmopolitan&#x2F;blob&#x2F;de09bec215675e9b0b...</a> One thing that the web page doesn&#x27;t mention (for the sake of simplicity) is that the Cosmopolitan headers do call __builtin_memcpy() as well, but only for 2-power constexpr sizes. That&#x27;s the only time when GCC and Clang both do the optimal thing. In all other cases it&#x27;s faster to use asm(&quot;call MemCpy&quot;) which implements something faster than the builtin would otherwise generate. See <a href="https:&#x2F;&#x2F;github.com&#x2F;jart&#x2F;cosmopolitan&#x2F;blob&#x2F;de09bec215675e9b0beb722df89c6f794da74f3f&#x2F;libc&#x2F;nexgen32e&#x2F;memcpy.S#L49" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;jart&#x2F;cosmopolitan&#x2F;blob&#x2F;de09bec215675e9b0b...</a>')