Item(by='unilynx', descendants=None, kids=[24800264, 24801584, 24799944], score=None, time=1602847888, title=None, item_type='comment', url=None, parent=24798834, text='HTTP is specifically the case where Nagle will probably hit most often.<p>If you treat TCP just like file stream (it&#x27;s a stream after all) and you&#x27;re implementing, say, a webserver, the most straightforward way to implement a response is to:<p><pre><code>  - figure out what was requested\n  - build headers\n  - send headers\n  - send the file body\n</code></pre>\nespecially if you intend to send the file body using sendfile. but this pattern is broken by Nagle - because there&#x27;s no return traffic between the two sends in HTTP and the headers often won&#x27;t fill out a full TCP packet, you&#x27;ll trigger the wait.')