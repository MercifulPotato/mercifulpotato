Item(by='59nadir', descendants=None, kids=None, score=None, time=1610809843, title=None, item_type='comment', url=None, parent=25798320, text='It&#x27;s almost always a mistake to take the convenience of not having to pass an allocator over the flexibility of passing one. Testing, optimization via different allocators, etc. all become much easier to work with if you just make it a hard rule that anything that allocates takes an allocator.<p>It&#x27;s impossible to misuse a function if it takes all its dependencies as arguments, etc..<p>With that said, I create structures that embed their allocator(s) and use them for their whole lifetime, with the rule that all their allocations have to come from the embedded ones or ones passed into methods (usually I don&#x27;t mix argument allocators &amp; stored ones, but this isn&#x27;t a hard rule).')