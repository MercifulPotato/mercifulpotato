Item(by='ed25519FUUU', descendants=None, kids=None, score=None, time=1606886629, title=None, item_type='comment', url=None, parent=25271791, text='The most devious s3 consistency issue I encountered was that S3 bucket configs are <i>actually stored in S3</i>, and were not read-after-write consistent.<p>It was bad. In order to &quot;update&quot; a bucket config programmatically you need to read the entire existing config, make an update, and then PUT it back (overwriting what&#x27;s there). The problem is when you went to read the config it&#x27;s possibly 15 minutes old or more, and when you put it back you overwrite any changes that may not be consistent.<p>I had to work around the issue by storing a high-water mark in the config ID, and then poll an external system to find the expected high water mark before I knew I could safely read and update.')