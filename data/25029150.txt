Item(by='wtallis', descendants=None, kids=None, score=None, time=1604870293, title=None, item_type='comment', url=None, parent=25028520, text='I know GCC supports generating multiple versions of a function, compiled for different instruction set extensions. And this can also be done manually when you have hand-optimized implementations: <a href="https:&#x2F;&#x2F;gcc.gnu.org&#x2F;onlinedocs&#x2F;gcc-10.2.0&#x2F;gcc&#x2F;Common-Function-Attributes.html#index-ifunc-function-attribute" rel="nofollow">https:&#x2F;&#x2F;gcc.gnu.org&#x2F;onlinedocs&#x2F;gcc-10.2.0&#x2F;gcc&#x2F;Common-Functio...</a> It&#x27;s based on a GNU extension to the ELF format, not preprocessor directives.<p>I don&#x27;t think any of that would conflict with using bitcode for everything you <i>don&#x27;t</i> have a hand-optimized machine-specific implementation of.')