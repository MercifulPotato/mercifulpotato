Item(by='pkhuong', descendants=None, kids=[25989094], score=None, time=1612190180, title=None, item_type='comment', url=None, parent=25976266, text='I switched some in-house database written in C to a variant of UTF-8b where the NUL byte is also surrogate escaped, mostly because of pervasive NUL termination issues as mentioned in the OP.<p>Escaping NULs wasn&#x27;t the only reason we chose that encoding. UTF-8b correctly roundtrips not-quite-UTF8 data instead of erroring out. That&#x27;s useful when you don&#x27;t have full control over the data generation process, or expect rare corruption (e.g., in log data or catastrophic error reports).<p>A UTF-8 column type is not just a storage choice, it&#x27;s also a constraint on your data... if it doesn&#x27;t make sense to forbid NULs, does it make sense to demand that the data be well-formed UTF-8?')