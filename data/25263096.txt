Item(by='aliceryhl', descendants=None, kids=None, score=None, time=1606806203, title=None, item_type='comment', url=None, parent=25262850, text='Writing to an ordinary integer in Rust only compiles if it is guaranteed that the integer is not shared with any other code, so writing to that boolean would not compile with an ordinary integer.<p>Rust instead has various special types, such as AtomicBool, that works in the same way as the C++ atomic bool from the example.<p>That said, to actually write the release&#x2F;acquire thing they did, you will need unsafe code because, to the compiler, the other variables are also shared, and would normally be prevented even if you used the atomic. That said, it would be possible to encapsulate this unsafe in a library without infecting other parts of the code.')