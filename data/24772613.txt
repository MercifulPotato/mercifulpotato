Item(by='sgtnoodle', descendants=None, kids=None, score=None, time=1602643478, title=None, item_type='comment', url=None, parent=24767795, text='You could use the non-petit version of this FAT library to do all the image twiddling from userspace, without having to rely on any kernel support. The only trick then would be compiling the code to run on windows. If you already support that in your build system, then great.<p>Otherwise, you could try to find a suitable FAT implementation written in a cross platform language like python.<p>Otherwise you&#x27;re looking at some fairly nasty scripting to get windows to do the FAT filesystem manipulation for you. As far as I know, windows doesn&#x27;t support loopback devices out of the box for example.<p>Do you really need a baked FAT32 filesystem? Could you get away with a simpler payload like a tar?')