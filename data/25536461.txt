Item(by='rleigh', descendants=None, kids=None, score=None, time=1608904348, title=None, item_type='comment', url=None, parent=25530667, text='I wasn&#x27;t involved so can&#x27;t personally provide details of how this was done at Sun.  Most of my knowledge comes from listening to talks and reading books on ZFS.<p>For work I&#x27;m involved in relating to safety-critical systems, we use the V-model for concepts, requirements, design and implementation, with extensive validation and verification activities at each level.  Tools are used to manage all of the requirements, design details and implementation details and link them all together in a manner which aims to require self-consistency at all levels.  When done correctly, this means that the person writing the code does not need to be particularly creative at this stage: the structure is completely detailed by the formal design.  But it does require significant up-front effort to carefully consider and nail down the design to this level of detail.  But it does avoid the need to continually revise and adapt an incomplete or bad design in a never-ending implementation phase.<p>This approach is definitely not for everyone, and there are many things one can criticise about it.  But if you are willing to bear the financial cost and time costs of doing that detailed design work up front, the cost of implementation will be much lower and the product quality will be much greater.  There is a lot to be said for not madly mashing keys and churning out code without thinking about the big picture, and Btrfs is a case study in what not to do.')