Item(by='wahern', descendants=None, kids=[25693740], score=None, time=1610151937, title=None, item_type='comment', url=None, parent=25692920, text='Another interesting factoid is that macOS only supports %n if the format string is located in read-only memory. Per printf(3) on macOS:<p>&gt; For this reason, a format argument containing %n is assumed to be untrustworthy if located in writable memory (i.e. memory with protection PROT_WRITE; see mprotect(2)) and any attempt to use such an argument is fatal. Practically, this means that %n is permitted in literal format strings but disallowed in format strings located in normal stack- or heap-allocated memory.<p>The manual page seems correct:<p><pre><code>  % cat test.c\n  #include &lt;stdio.h&gt;\n  int main(void) {\n    printf((char[]){ &quot;%n&quot; }, &amp;(int){ 0 });\n    return 0;\n  }\n  % cc -o test test.c                                          \n  % .&#x2F;test                                                     \n  zsh: abort      .&#x2F;test</code></pre>')