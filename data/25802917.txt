Item(by='_pastel', descendants=None, kids=[25803683, 25805174], score=None, time=1610811879, title=None, item_type='comment', url=None, parent=25802294, text='It&#x27;s a recursive query, but it&#x27;s basically the simplest recursive query.  It&#x27;s not <i>that</i> bad.<p><pre><code>  WITH recursive_traversal(depth, id)\n  AS (\n    -- base case: the root has no previous\n    SELECT 0, id\n    FROM todo\n    WHERE previous IS NULL\n      AND user_id = $1\n  \n    UNION ALL\n\n    -- recursive case: traverse to next row\n    SELECT depth + 1, todo.id\n    FROM todo\n    JOIN recursive_traversal r ON r.next = todo.id\n    WHERE depth &lt; $2\n  )\n  -- we only accumulated the ids, so join one more time to get the rest of the columns\n  SELECT todo.*\n  FROM todo\n  JOIN recursive_traversal USING (id);</code></pre>')