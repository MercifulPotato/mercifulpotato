Item(by='throwdbaaway', descendants=None, kids=None, score=None, time=1602571894, title=None, item_type='comment', url=None, parent=24757333, text='&gt; What happens if the new row does not fit in? In this case performance will be worse because zheap essentially has to perform a DELETE &#x2F; INSERT operation which is of course not as efficient as an in-place UPDATE.<p>I would be wary of this. Innodb, for example, also has an optimistic (in-place) UPDATE mode, and a pessimistic UPDATE mode.<p>Repeatedly updating the same row under the pessimistic mode would end up stalling the database, even at a rather low QPS.<p><a href="https:&#x2F;&#x2F;bugs.mysql.com&#x2F;bug.php?id=53825" rel="nofollow">https:&#x2F;&#x2F;bugs.mysql.com&#x2F;bug.php?id=53825</a> was originally reported by Facebook 10 years ago, and is still not fixed in 8.0.21 with VATS &#x2F; CATS scheduling.<p>And then there is also the performance gap between the ideal case where undo log is still in memory, versus the pathological case where undo log needs to be fetched from disk.<p>The last thing postgres needs is something that looks good on paper &#x2F; in benchmark, but has a bunch of issues in production.')