Item(by='secondcoming', descendants=None, kids=[25323881], score=None, time=1607260349, title=None, item_type='comment', url=None, parent=25322891, text='Just yesterday I had to wrap up offsetof in a macro for use in some pseudo-reflection code<p><pre><code>    #define MEMBER(C, M) { offsetof(C, M), sizeof(C::M) }\n</code></pre>\nI couldn&#x27;t figure out nice a way to do this without the preprocessor. The best I came up with was to use a lambda:<p><pre><code>    [] (const C&amp; c) { return std::cref(c.m); }\n</code></pre>\nBut these are stored in a std::map which means I have to use function pointers or accept the overhead of std::function')