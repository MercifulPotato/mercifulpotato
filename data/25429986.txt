Item(by='twic', descendants=None, kids=[25456087, 25436447], score=None, time=1608038256, title=None, item_type='comment', url=None, parent=25429748, text='Read to the end before screaming. I do this:<p><pre><code>  exec &gt;&gt;$log_file 2&gt;&amp;1\n  if ! flock --exclusive --nonblock 1\n  then\n    log &quot;unable to get exclusive lock, aborting&quot;\n    exit 1\n  fi\n</code></pre>\nWhich redirects standard output to a log file, then tries to get an exclusive lock on it. The lock is created by the flock subprocess, but continues to exist until the script exits and closes that file descriptor.<p>This means there can only be one process writing to a given log file at a time. For me, that is the right granularity of locking - i have several cron jobs running this script, but with different arguments, and writing to different log files.')