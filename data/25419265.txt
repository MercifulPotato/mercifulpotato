Item(by='gpderetta', descendants=None, kids=[25420648], score=None, time=1607962712, title=None, item_type='comment', url=None, parent=25418730, text='it is a bit annoying yes. There are some proposals to have a anonymous reusable placeholders like &#x27;_&#x27;, but they haven&#x27;t gone anywhere yet.<p>You can do<p><pre><code>    lock(mutex), some-lock-protected-expression; \n</code></pre>\nbut it is a bit too cute and limited.<p>On the other hand, being able to name the RAII object is often very useful for example if you need to dismiss them early, which happens often in transactional code (unlocking a mutex before the end of scope is a relatively common occurrence).<p>Also specifically for mutexes, a nice pattern is to bind object and mutex together to guarantee that the object is always used with the lock:<p><pre><code>   sync&lt;my_object&gt; foo;\n\n   {\n     auto l = foo.lock(); &#x2F;&#x2F; starts the critical section\n\n     l-&gt;do_something()\n     l-&gt;do_something_else();\n   } &#x2F;&#x2F; it ends here\n\n   &#x2F;&#x2F; or if you only need to hold the mutex for a single call:\n\n   foo-&gt;do_something(); &#x2F;&#x2F; critical section lives only for the full expression</code></pre>')