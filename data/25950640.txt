Item(by='jcynix', descendants=None, kids=[25950792], score=None, time=1611874141, title=None, item_type='comment', url=None, parent=25949456, text='You could deduce the working directory from the sequence of commands in your history file, so the working directory is implicitly contained in the history file.<p>I don&#x27;t remember an option to save the working directory explicitly. But zsh has a number of history related commands, which can be used to execute shell functions before and after each command. So you could use these to write your own special history file, even one per directory if need. Example:<p><pre><code>   zshaddhistory () { echo &quot;$PWD  -- $1&quot; &gt;&gt; $MY_HISTFILE }\n</code></pre>\nThis shell function defined here will run when the command has been read but just before it will be executed. The argument $1 contains the command line to be executed.')