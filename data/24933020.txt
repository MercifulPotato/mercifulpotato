Item(by='jsmith45', descendants=None, kids=[24933084], score=None, time=1603993269, title=None, item_type='comment', url=None, parent=24931577, text='<i>Because I have not yet figured out how to start executing at somewhere other than the beginning of the generated code, and because I don’t store generated code in any intermediate buffers, and because we don’t know the sizes of any code in advance, I do this funky thing where I emit a jmp to the body code.</i><p><i>If you, dear reader, have a better solution, please let me know.</i><p>Assuming you know the byte offset into the code buffer, of your &quot;main&quot; equivalent label, you should be able to use the following:<p><pre><code>  byte* start_address = buf-&gt;address + offset;\n  JitFunction function = *(JitFunction*)(&amp;start_address);\n  return function(heap);\n</code></pre>\nI&#x27;m guessing you were running into the issue that you can&#x27;t do this in one line while also suppressing the warning about the data pointer to function pointer.<p>The &quot;normal&quot; way to do this would be the following, but it has the downside of the compiler warning:<p><pre><code>  JitFunction function = (JitFunction)(buf-&gt;address + offset);\n  return function(heap);</code></pre>')