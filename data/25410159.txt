Item(by='haberman', descendants=None, kids=[25410278, 25411706], score=None, time=1607892900, title=None, item_type='comment', url=None, parent=25409535, text='The same thing happened to me the first time I tried to benchmark my code on M1.<p>In my case I was building using Bazel. Bazel was running under Rosetta because they don&#x27;t release a darwin_arm64 build yet. I didn&#x27;t realize the resulting code was also built for x86-64.<p>I tried explicitly passing -march but the compiler rejected this, saying it was an unknown architecture. After some experimentation, it appears that when you exec clang from a Rosetta binary it puts it in a mode where it only knows how to build x86.')