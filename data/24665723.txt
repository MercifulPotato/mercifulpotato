Item(by='ncmncm', descendants=None, kids=[24666462, 24670253], score=None, time=1601664371, title=None, item_type='comment', url=None, parent=24657747, text='Of course if you are looking to see whether a lower-case letter is one of a set, you use a bitmap:<p><pre><code>  bool isvowel(char c){ return (1&lt;&lt;c-&#x27;a&#x27;)&amp;0x104111; }\n</code></pre>\nOften O(1) is better than O(n) even for small n.<p>Often O(1) is better than O(1).<p>Modern compilers will turn<p><pre><code>  bool isvowel(char c){\n    switch(c){\n    case&#x27;a&#x27;:case&#x27;e&#x27;:case&#x27;i&#x27;:case&#x27;o&#x27;:case&#x27;u&#x27;: \n      return true;\n    }\n    return false;\n  }\n</code></pre>\ninto sort-of the same code (after a range check).\n<a href="https:&#x2F;&#x2F;godbolt.org&#x2F;z&#x2F;aMcdY6" rel="nofollow">https:&#x2F;&#x2F;godbolt.org&#x2F;z&#x2F;aMcdY6</a><p>Looking at the code actually produced, the compiler has noticed that all the vowels are even-numbered characters\n(0,4,8,14,20), so combined the range check with a &quot;rotate-right&quot; so it can compress 0x104111 down to 0x495, and shift that right and check the low bit of the result instead of doing a &quot;bt&quot;, or bit-test. It&#x27;s anybody&#x27;s guess why that is considered better; shifts are supposed to be constant-time; but checking the low bit is a byte-sized operation. So, maybe<p><pre><code>  bool isvowel(char c){ return (0x104111&gt;&gt;c-&#x27;a&#x27;)&amp;1; }\n</code></pre>\nis better: <a href="https:&#x2F;&#x2F;godbolt.org&#x2F;z&#x2F;M784cK" rel="nofollow">https:&#x2F;&#x2F;godbolt.org&#x2F;z&#x2F;M784cK</a>')