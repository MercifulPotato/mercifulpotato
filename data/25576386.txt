Item(by='ithkuil', descendants=None, kids=None, score=None, time=1609284675, title=None, item_type='comment', url=None, parent=25571773, text='&gt; I imagine locals are allocated to and stored on the stack, exactly like you discuss for the registers. But in a stack VM, you can&#x27;t work on them directly. Instead you have to load them into this special other place<p>Another thing you have to take into consideration is how many registers you can index. This is relevant also when you&#x27;re not constrained by hardware registers when you define a VM, because register references take up space in the instruction encoding, which have consequences in the instruction decoding performance and analysis (e.g. if all your instructions have the same length you are sure you cannot have jumps in the middle of an instruction and thus start executing a corrupt &quot;unaligned&quot; instruction stream)<p>Once you have more locals than available registers, you have to start emitting instructions to spill and load locals from and into registers which play a bit the role of the dance you have to do in stack machines to access any local.<p>In a way you can see a stack machine as a degenerate case of a register machine: a 2 register machine with some implicit operations on them every time an instruction is executed.')