Item(by='danabramov', descendants=None, kids=None, score=None, time=1608583292, title=None, item_type='comment', url=None, parent=25498924, text='<i>tldr: we use a richer format to preserve state on refetch, but this format can be turned into HTML for first render.</i><p>Our underlying transport is not exactly JSON but something like &quot;JSON with holes&quot;. It&#x27;s basically a JSON with placeholder string values like &quot;$1&quot;, &quot;$2&quot;, that later get filled in the future rows. This lets us have breadth-first streaming where we can show some content as early as possible, but always have intentional loading states.<p>The choice of JSON is because we need to be able to<p>* Pass component props (which are JSON) to Client Components<p>* Reconcile the tree on refetches so that state inside isn&#x27;t thrown away<p>HTML doesn&#x27;t let us have either of these two. However, starting with a richer format, and <i>then</i> converting it to HTML for initial render, works.')