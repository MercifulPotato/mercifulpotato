Item(by='pflanze', descendants=None, kids=[25224366], score=None, time=1606222196, title=None, item_type='comment', url=None, parent=25193071, text='How can you use cgroups2 for this? I know that BSD resource limits are basically useless for this as they only allow to limit virtual memory, not RSS use.<p>EarlyOOM [1] is a configurable daemon that kills processes early enough to (hopefully) prevent thrashing. I&#x27;m using it on my Linux desktops (it has proven to catch my own programs&#x27; runaway memory usage before it risks locking up the development machine), but it may also be useful on servers. It logs to syslog but also can be configured to run a program on kill events.<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;rfjakob&#x2F;earlyoom" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;rfjakob&#x2F;earlyoom</a>, <a href="https:&#x2F;&#x2F;launchpad.net&#x2F;ubuntu&#x2F;+source&#x2F;earlyoom" rel="nofollow">https:&#x2F;&#x2F;launchpad.net&#x2F;ubuntu&#x2F;+source&#x2F;earlyoom</a>, <a href="https:&#x2F;&#x2F;packages.debian.org&#x2F;search?keywords=earlyoom" rel="nofollow">https:&#x2F;&#x2F;packages.debian.org&#x2F;search?keywords=earlyoom</a><p>(Why would a user space OOM killer be necessary if the kernel has better information about the state of the world? I don&#x27;t know the details, but my interpretation is that because people disliked OOM killing, the kernel devs made the kernel OOM killer trigger so late that it is largely useless. If that&#x27;s true and thus a social problem, maybe it needs to be solved on that level, too.)<p>BTW in my experience, Linux 2.2 used to handle out of memory situations much more gracefully than any later kernel version.')