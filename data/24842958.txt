Item(by='temac', descendants=None, kids=None, score=None, time=1603232865, title=None, item_type='comment', url=None, parent=24841379, text='Overlong encoding is not just non-canonical UTF-8. It is actually forbidden; it is not UTF-8. A decoder without checks can as well not return the codepoints you expect at all (that would be curious but if you try to heavily optimize one, maybe you can end-up with a result that does that).<p>So at the point where you do UTF-8 -&gt; codepoint decoding, it is perfectly reasonable to... validate UTF-8 -&gt; codepoint decoding? (or do a safe decoding that copes with invalid things)<p>Yes you might need to do other kind of validations after that, maybe (or not) some related to Unicode, maybe even some completely unrelated to Unicode and unique to your application, but so what? That does not make UTF-8 encoding validation useless.')