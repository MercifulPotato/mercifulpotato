Item(by='SloopJon', descendants=None, kids=None, score=None, time=1605676961, title=None, item_type='comment', url=None, parent=25130220, text='Surrogates are technically a UTF-16 only thing.  Realizing that sometimes they nevertheless escape out into the wild, WTF-8 defines a superset of UTF-8 that encodes them:<p><a href="https:&#x2F;&#x2F;simonsapin.github.io&#x2F;wtf-8&#x2F;" rel="nofollow">https:&#x2F;&#x2F;simonsapin.github.io&#x2F;wtf-8&#x2F;</a><p>To be clear, this is not an official Unicode spec.  It&#x27;s a hack (albeit a pretty natural and obvious one) to deal with systems that don&#x27;t do Unicode quite right.<p>I recently came across some old code that narrows wchar_t to UCS-2 by zeroing out the high-order bytes.  Even though my test was careful not to generate any surrogates in the input, they showed up in the output when a randomly generated code point like U+1DF7C was mangled into U+DF7C.<p>A corrupted value like that is not necessarily a great example of something you want to preserve, but it&#x27;s the sort of thing that late 90s code assumed about Unicode.')