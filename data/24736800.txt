Item(by='7kmph', descendants=None, kids=[24737094], score=None, time=1602306255, title=None, item_type='comment', url=None, parent=24729218, text='I find myself in the need of a &quot;lib_download&quot; a few times, a high level library that:<p>- support HTTP&#x2F;HTTPS<p>- support proxy (for by-passing firewall, censorship, etc, http&#x2F;https&#x2F;socks5)<p>- download one large file in parallel (configurable temporary directory)<p>- download many small files in parallel (seems too high-level to put in a library, not sure this is a good feature)<p>- configurable retry (maybe too high-level to put in a library)<p>- resume download<p>- good error semantics<p>- an interface with defined behaviour<p>- progress report (useful for downloading large files)<p>I tried using a wrapped (in rust) version of libcurl, and in the end I decided to just use the curl cli, and read through the man page and pass about 13 arguments to it to make it&#x27;s behaviour defined (to me, to a certain confidence level), I also pinned the curl executable to a specific version to avoid unknown changes.<p>The end result works, but the process is unnecessarily complicated (invoke the cli binary, know what argument to pass, know the meaning of the many error codes), and the resume is not pleasant to use. I guess libcurl is designed to be that way, so that to an curl-master, he can tune all the knobs to do what he want, but to a average library user who just want to download things, it requires more attention than I&#x27;m willing to give to.<p>Used in an interactive context, the issue of defined behaviour is usually overlooked, but when used a library in a program that runs unattended and expensive to upgrade&#x2F;repair, achievable defined behaviour is a must, and test is not an alternative to it, even experience is not an alternative (experience are time consuming to get, and not transferable to others).<p>All package managers needs to download packages from internet, often via HTTP, it&#x27;s good to have a easy-to-use, well-defined, capable download library, many of them uses curl (Archlinux&#x27;s pacman, rust installation script), many of them use others with varying level of capabilities, I thinks it would be beneficial if we can have a good library (in rust) for download things.')