Item(by='modeless', descendants=None, kids=[25653161], score=None, time=1609890333, title=None, item_type='comment', url=None, parent=25651064, text='I like this vision of shared libraries sandboxed inside a minimal runtime to replace the browser. But there are some serious problems with it (that I hope can be resolved somehow).<p>Replicating a significant fraction of the functionality of a browser ends up being a <i>lot</i> of code and data. For a web-like experience with instant navigation between apps it will be necessary for these shared libraries to be <i>really</i> shared, as in almost all apps use the same libraries and the same <i>version</i> of those libraries. Otherwise you&#x27;d be downloading and unpacking and JIT compiling dozens or hundreds of megabytes of code and data before you could display a single line of text, every time you click a link to a new site. The linkable nature of the web would be lost. (Yes, many websites are dozens of megabytes already, but the bulk of that is delay-loaded and happens in the background after the initial content is displayed).<p>In order for the standard libraries to be actually shared, everyone would have to agree on the standard libraries to use, and the standard libraries would have to be designed to be backwards compatible so that older sites could be force-upgraded to use newer versions. This is essentially the role that browser updates play today. But the browser evolved over decades and it&#x27;s not clear how you&#x27;d get everyone to adopt a new set of standard libraries today, nor how you&#x27;d get everyone to agree on what functionality to add over time (the role that W3C plays today).<p>For libraries outside of the standard set, it sounds tempting to allow them to be shared too. But this is actually an unavoidable privacy violation. If you have a shared cache, then any app can discover the set of previously loaded libraries with a timing attack, thus revealing information about the user&#x27;s browsing history. This is why all browsers are now moving to partition all caches by site: <a href="https:&#x2F;&#x2F;www.jefftk.com&#x2F;p&#x2F;shared-cache-is-going-away" rel="nofollow">https:&#x2F;&#x2F;www.jefftk.com&#x2F;p&#x2F;shared-cache-is-going-away</a>. Even if multiple sites reference the same wasm blob, it <i>must</i> be downloaded and JITed separately with no sharing.<p>As I said, I like the vision of a tiny low-level runtime executing shared libraries inside a sandbox. But I&#x27;m not sure how it could be done in an efficient and privacy-respecting way if you want to replace the Web with it.')