Item(by='wruza', descendants=None, kids=None, score=None, time=1606191361, title=None, item_type='comment', url=None, parent=25193879, text='A factor of two is always a good start. There was a claim that 1.5 is better realloc-hole-wise, but the tested difference was shown to be negligible. Sorry for no links, it&#x27;s early morning. Scaling down or preallocating is simple: expose fit(n) and regrow() functions which fit the capacity to at least max(used, n) items or reset your guess back to natural. There is end user somewhere up the call stack who knows when bufwriting is over and no growth&#x2F;shrinkage will happen for a while. If automatic shrinkage is implemented, it should have a significant hysteresis to prevent push&#x2F;pop&#x2F;push&#x2F;pop realloc jitter. The really tricky part is that generic containers often skip this api and make a guesswork that sucks.')