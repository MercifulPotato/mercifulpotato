Item(by='aftbit', descendants=None, kids=None, score=None, time=1608161081, title=None, item_type='comment', url=None, parent=25449875, text='I also haven&#x27;t fully groked this to be fair, but my understanding is:<p>(1) Alice and Bob both connect to coordination server<p>(2) Alice sets Bob&#x27;s endpoint to bob_ip:bob_port<p>(3) Bob sets Alice&#x27;s endpoint to alice_ip:alice_port<p>(4) Both try to ping each other, which makes both of them originate outbound packets from the wireguard socket.<p>IF Alice and Bob have the same public IP:port pair in their NAT with each other as they do with the coordination server (which turns out to be true in tests on my EdgeRouter X NAT, but certainly isn&#x27;t true 100% of the time), then I believe this process will result in a working connection.<p>If you&#x27;re asking how Bob &amp; Alice know that the information in the coordination server has changed and that they need to reconfig their endpoints, then I&#x27;m not sure. Perhaps they could just re-query the coordination server on a timeout or whenever their connection went down.<p>I agree - using DNS as a transport seems orthogonal to the NAT punching process, and maybe too clever. If you&#x27;re going to need to write custom endpoint code either way, I don&#x27;t see a huge advantage. If wireguard supported DNS-based endpoint information by default (automatically re-resolving IP and detecting port from SRV), then it&#x27;d make a lot more sense.')