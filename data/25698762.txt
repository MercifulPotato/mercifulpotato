Item(by='Someone', descendants=None, kids=None, score=None, time=1610182681, title=None, item_type='comment', url=None, parent=25691269, text='You wouldn’t have to say it. Linkers could figure it out on their own (but compilers dropping hints would make it easier)<p>Some linkers already can merge functions that happen to compile to the same code, even though that corrupts stack frames (<i>foo</i> calls <i>bar</i>, but the linker makes it call <i>baz</i> instead. <a href="https:&#x2F;&#x2F;stackoverflow.com&#x2F;a&#x2F;61865960" rel="nofollow">https:&#x2F;&#x2F;stackoverflow.com&#x2F;a&#x2F;61865960</a>)<p>It’s ‘just’ a matter of learning the build system new tricks.<p>I found a short discussion on this at <a href="https:&#x2F;&#x2F;gcc.gnu.org&#x2F;legacy-ml&#x2F;gcc&#x2F;2000-02&#x2F;msg00575.html" rel="nofollow">https:&#x2F;&#x2F;gcc.gnu.org&#x2F;legacy-ml&#x2F;gcc&#x2F;2000-02&#x2F;msg00575.html</a> that contains <a href="https:&#x2F;&#x2F;gcc.gnu.org&#x2F;legacy-ml&#x2F;gcc&#x2F;2000-02&#x2F;msg00599.html" rel="nofollow">https:&#x2F;&#x2F;gcc.gnu.org&#x2F;legacy-ml&#x2F;gcc&#x2F;2000-02&#x2F;msg00599.html</a>, which says<p>“The P3 SSE stuff we&#x27;ve done generates multiple entry points,\nbut it does that within the backend prologue expander.  There&#x27;s nothing to generate multiple regular prologues.  Though it shouldn&#x27;t be that hard to do.<p>It&#x27;s not impossible to believe that the bulk of the compiler\nwould work with them, as long as flow knows how to properly\ncreate the CFG.  LABEL_ALTERNATE_NAME was invented for this,\nthough it appears that the code to properly deal with it is\nsitting on a branch waiting for accounting to say it has been\npaid for.“<p>That was in February 2000. I wouldn’t know whether that comment was close to the truth or what gcc currently supports.<p>For llvm, the thread at <a href="https:&#x2F;&#x2F;lists.llvm.org&#x2F;pipermail&#x2F;llvm-dev&#x2F;2018-October&#x2F;127154.html" rel="nofollow">https:&#x2F;&#x2F;lists.llvm.org&#x2F;pipermail&#x2F;llvm-dev&#x2F;2018-October&#x2F;12715...</a> gives some cases where this could be used, but reading it, it doesn’t look it is solved in the way I gave (see for example <a href="https:&#x2F;&#x2F;lists.llvm.org&#x2F;pipermail&#x2F;llvm-dev&#x2F;2018-October&#x2F;127175.html" rel="nofollow">https:&#x2F;&#x2F;lists.llvm.org&#x2F;pipermail&#x2F;llvm-dev&#x2F;2018-October&#x2F;12717...</a>. <a href="https:&#x2F;&#x2F;lists.llvm.org&#x2F;pipermail&#x2F;llvm-dev&#x2F;2018-October&#x2F;127158.html" rel="nofollow">https:&#x2F;&#x2F;lists.llvm.org&#x2F;pipermail&#x2F;llvm-dev&#x2F;2018-October&#x2F;12715...</a> calls it “more like separate functions with a common tail.”, so I’m not alone in that.<p>That thread also indicates that DWARF has support for helping debuggers figure out the correct name of such a function.')