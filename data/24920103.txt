Item(by='chriswarbo', descendants=None, kids=None, score=None, time=1603899843, title=None, item_type='comment', url=None, parent=24919454, text='I think Nix does a pretty good job at this. I&#x27;ve used it on Ubuntu, macOS and NixOS (with the latter two sharing the same system config, with OS-specific pieces tucked into if&#x2F;else expressions).<p>I think of Nix more as a build system than a package manager (and in fact I&#x27;ve come to think of &quot;package managers&quot; as a sub-set of build systems, mostly used to work around deficiencies in Make which make it unsuitable for building whole operating systems via composition of their Makefiles).<p>One thing that Nix emphasises is that users should not be installing dependencies, like libraries; let alone in a globally visible, ambiguous location like &#x27;&#x2F;usr&#x2F;lib&#x27; (or &#x2F;usr&#x2F;bin, etc. if it&#x27;s a tool that we&#x27;re depending on). Dependencies are only needed &#x27;ambiently&#x27; in a package&#x27;s build environment; build products can embed references those by absolute path if they like, but they shouldn&#x27;t be &#x27;propagated&#x27; into the final system.')