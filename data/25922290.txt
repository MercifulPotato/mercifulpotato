Item(by='comex', descendants=None, kids=[25922342], score=None, time=1611703759, title=None, item_type='comment', url=None, parent=25922132, text='&gt; I would agree that that&#x27;s more arguably a bug in libc than in doas, but also note that the startup code for any language has to consider this case.<p>This is true, but for a language where dynamically sized arrays are a standard data type, the most natural thing to do is to start by collecting the arguments into an array (maybe copying the strings at this point, maybe not).  All further argument parsing is done with the array and is thus bounds-checked.  I checked Rust&#x27;s standard library and sure enough, it follows this pattern.  Though, I could imagine some hypothetical startup code messing up the argc=0 case if it tried to separate argv[0] from the rest of the arguments while constructing the array.<p>&gt; Anyway, I like your comment, but I&#x27;d recommend a different moral to this story: in the space of 47 minutes you were able to conduct a reasonably thorough audit on the doas codebase. Wanna give that a shot for sudo now?<p>Fair point.  (And I didn&#x27;t downvote you.)  But in my opinion, that just confirms my view: ideally you want both simplicity and memory safety.')