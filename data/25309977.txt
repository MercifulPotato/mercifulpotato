Item(by='nullc', descendants=None, kids=None, score=None, time=1607126200, title=None, item_type='comment', url=None, parent=25308305, text='&gt; Could not figure out how to trigger a malloc failure inside of a imported library<p>Glibc has (or at least has had) special (unsupported) instrumentation that lets you substitute out the libc malloc at runtime with another function.<p>You can use this to shim in a version that fails after a specific number of executions in order to inject malloc faults.<p>E.g. <a href="https:&#x2F;&#x2F;github.com&#x2F;xiph&#x2F;opus&#x2F;blob&#x2F;master&#x2F;tests&#x2F;test_opus_api.c#L1751" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;xiph&#x2F;opus&#x2F;blob&#x2F;master&#x2F;tests&#x2F;test_opus_api...</a>')