Item(by='hinkley', descendants=None, kids=None, score=None, time=1611710378, title=None, item_type='comment', url=None, parent=25922906, text='There are ways to flatten those trees and leave the code a bit more readable. Bertrand Meyer hit on it 30 years ago:<p><pre><code>   if (weShouldDoThis()) {\n       return doIt();\n   }\n</code></pre>\nStructurally, this seems very similar to having twenty methods with one conditional block and a delegation to some other method. But the stack trace is half as high, and the testing surface area is greatly improved, because the code in the &#x27;if&#x27; clause is pure, or close to it, while the &#x27;doIt()&#x27; method might alter shared state.<p>There&#x27;s a big difference from a robustness standpoint between having half of your functions pure, and half of each function pure.')