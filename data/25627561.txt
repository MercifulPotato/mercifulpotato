Item(by='burntsushi', descendants=None, kids=None, score=None, time=1609729681, title=None, item_type='comment', url=None, parent=25627502, text='It&#x27;s prevented by good sense. The functions are likely multiple KB in size. Inlining them would seriously bloat the binary and would be unlikely to help due to how much work most regex engines do on each search.<p>The remaining work _on this particular benchmark_ is the regex algorithm itself. I&#x27;m on mobile so I can&#x27;t do a deep dive, but I haven&#x27;t yet figured out how to easily improve on this particular case. It has to do with the fact that the benchmark has a high match count and the finite automata approach in the regex crate has a bit higher overhead than the typical backtracking solution used in PCRE2 (which is also JIT&#x27;d in this case).<p>It&#x27;s not the language, compiler, inlining or any other such thing. It&#x27;s algorithms.<p>But this is one single benchmark. Before regex-redux there was regex-dna, and Rust&#x27;s regex crate was #1 there. Why? Same reason. Algorithms.<p>You can&#x27;t judge regex performance by a single benchmark. Two won&#x27;t do it. Not even ten. It&#x27;s one of the many problems with the Benchmark Game. This would be fine if everyone was circumspect and careful with their interpretation of the data provided, but they aren&#x27;t. And the Benchmark Game doesn&#x27;t really do much to alleviate this other than some perfunctory blurbs in some corners of the web site.<p>With that said, running a benchmark is hard work. It&#x27;s easy to criticize.')