Item(by='bzbarsky', descendants=None, kids=[25361279], score=None, time=1607532725, title=None, item_type='comment', url=None, parent=25357829, text='If the script were at the top, it would run before any of the rest of the JSON gets inserted into the DOM, so it would (1) not have access to it (unless it sets up an async callback to do it) and (2) not be able to remove it from the DOM (until that callback runs).<p>The script might be able to set up mutation observers that notice stuff being added to the DOM and immediately remove it into a buffer the script maintains.  This might actually be pretty viable.<p>&gt; Or actually, you can probably just put some closing angles before the start of your render to make sure you donâ€™t get broken from above.<p>That won&#x27;t help with the fact that the data will actually be &quot;corrupted&quot; by the HTML parser.  This is why all the HTML inside the JSON in the example is HTML-encoded.<p>One plausible fix for _that_ is to have a &lt;plaintext&gt; tag right after your &lt;script&gt;.  So put the #render as the first thing in the JSON, set up mutation observers in the script, &lt;plaintext&gt; to prevent HTML-parsing of the rest of the doc, and this might be pretty robust to random HTML bits in the JSON data.')