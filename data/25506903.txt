Item(by='ImprobableTruth', descendants=None, kids=None, score=None, time=1608649716, title=None, item_type='comment', url=None, parent=25504133, text='&gt;It leads to recursion where iteration is more natural<p>Viewing iteration as more &#x27;natural&#x27; than a fold seems down to mostly taste. And hell, if you really want iteration, you can easily get that in both effectful and non-effectul variants through monads.<p>&gt;ask a functional programming zealot to implement an O(1) hash map in a pure wayâ€”they will usually stammer, try to move goal posts, before finally admitting it&#x27;s not possible<p>Except that no one - not even Haskell zealots - will argue that you never need effects, but simply that effects should be encapsulated. In Haskell, nothing prevents you from using mutable state if you really need it and mutable hash tables can be easily implemented using something called functional state threads [1][2].<p>[1] <a href="https:&#x2F;&#x2F;www.microsoft.com&#x2F;en-us&#x2F;research&#x2F;wp-content&#x2F;uploads&#x2F;1994&#x2F;06&#x2F;lazy-functional-state-threads.pdf" rel="nofollow">https:&#x2F;&#x2F;www.microsoft.com&#x2F;en-us&#x2F;research&#x2F;wp-content&#x2F;uploads&#x2F;...</a><p>[2] <a href="http:&#x2F;&#x2F;hackage.haskell.org&#x2F;package&#x2F;hashtables-1.2.4.1" rel="nofollow">http:&#x2F;&#x2F;hackage.haskell.org&#x2F;package&#x2F;hashtables-1.2.4.1</a>')