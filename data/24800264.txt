Item(by='nly', descendants=None, kids=None, score=None, time=1602852517, title=None, item_type='comment', url=None, parent=24799717, text='In your example sending the file body will fill the remainder of the packet containing the headers and trigger a packet send. The client waiting for your response isn&#x27;t going to lose out. In fact, they&#x27;ll benefit from having file body data in that first packet.<p>Your example is when you <i>want</i> Nagles algorithm to apply. This  exact use case is mentioned on tcp(7) under the TCP_CORK option, which is like a more explicit, application controlled, version of  Nagle.<p>Nagles algorithm sucks for HTTP <i>clients</i> who happen to send big HTTP <i>requests</i>. If the HTTP headers being sent are &gt;1400 bytes or so, then the tail end of the request will wait 1 RTT for the ACK of the first part. This will be particularly bad if the HTTP server has delayed-ACKs enabled (TCP_QUICKACK is not on). The server TCP stack has no idea that the HTTP server application  hasn&#x27;t yet got a full request and can&#x27;t yet respond, so will delay the ACK of the first 1400 request bytes in the hope that it will.<p>The delayed ACK delay is probably small compared to the RTT, so Nagle still dominates')