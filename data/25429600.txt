Item(by='ralfj', descendants=None, kids=[25431972], score=None, time=1608034903, title=None, item_type='comment', url=None, parent=25428899, text='&gt; if this snippet is legal C code, then LLVM can&#x27;t treat it as if it were UB?<p>It can in principle for the purpose of this example, since this is not the C code that the programmer originally wrote. This just means that if the snippet is legal C code, LLVM needs to do <i>something</i> extra during its translation to make this legal LLVM IR.<p>But I am also happy to consider a different example, where this <i>is</i> the original C program. Is this legal C code? To my knowledge, basically everyone agrees that the answer is &quot;no, this is UB&quot;. That includes both compilers (that will happily &quot;miscompile&quot; this code) and all formal semantics for C that I have seen so far. So I think you are in the minority with your interpretation of the standard. It&#x27;s a shame that the standard is not precise enough to properly settle this question...<p>If the standard <i>were</i> amended to explicitly make this code allowed in C, I think C compiler devs would revolt, as all major C compilers have some pretty crucial analysis that are fundamentally relying on this <i>not</i> being legal C code.')