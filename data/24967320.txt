Item(by='mg', descendants=None, kids=[24968230, 24967958, 24967679, 24967411, 24967408, 24967738], score=None, time=1604319689, title=None, item_type='comment', url=None, parent=24967170, text='This is a script I call &quot;certdays.sh&quot; which you can call from your regular tests like this:<p>certdays.sh somedomain.com 14<p>If the certificate for somedomain.com is valid less then 14 days, it will fail.<p><pre><code>    certdate=`\n    echo                                                        | \\\n    openssl s_client -servername $1 -connect $1:443 2&gt;&#x2F;dev&#x2F;null | \\\n    openssl x509 -noout -dates                                  | \\\n    tail -n 1                                                   | \\\n    cut -d= -f2`\n    certsec=`date +%s -d &quot;$certdate&quot;`\n    nowsec=`date +%s`\n    days=`echo &quot;($certsec-$nowsec) &#x2F; ( 60*60*24 )&quot; | bc`\n\n    echo &quot;$1: $days&quot;\n\n    if [ ! -n &quot;$2&quot; ]; then\n     echo done\n     exit 0\n    fi\n\n    echo -n &quot;Lasts longer then $2 days? &quot;\n\n    if (($days&gt;$2)); then\n     echo Yes.\n    else\n     echo NO!!!!!!!!!!!!!!\n     exit 1\n    fi</code></pre>')