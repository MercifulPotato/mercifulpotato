Item(by='Joker_vD', descendants=None, kids=[24841470, 24840857, 24842100], score=None, time=1603218141, title=None, item_type='comment', url=None, parent=24840274, text='&gt; finding the end of a string may place you into invalid memory if there are missing trailing bytes<p>I struggle to imagine such a function. If its signature is &quot;const char * utf8end(const char * s, size_t len)&quot;, then the implementation is obviously &quot;return s + len&quot;. If the len is missing then, uh, you can&#x27;t find the end unless there is a terminator character, in which case the implementation is &quot;return s + strlen(s)&quot;.<p>And if you mean finding the beginning of the last codepoint, then again, you simply go to the very last byte of the string and rewind back until you see a non-trailing byte (or you&#x27;ve run off the beginning of the string, or you&#x27;ve seen more than 4 bytes in which case you have an invalid string).')